<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Craig Kerstiens]]></title>
  <link href="http://www.craigkerstiens.com/atom.xml" rel="self"/>
  <link href="http://www.craigkerstiens.com/"/>
  <updated>2016-06-07T10:27:45-07:00</updated>
  <id>http://www.craigkerstiens.com/</id>
  <author>
    <name><![CDATA[Craig Kerstiens]]></name>
    <email><![CDATA[craig.kerstiens@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Five mistakes beginners make when working with databases]]></title>
    <link href="http://www.craigkerstiens.com/2016/06/07/five-mistakes-databases/"/>
    <updated>2016-06-07T00:00:00-07:00</updated>
    <id>http://www.craigkerstiens.com/2016/06/07/five-mistakes-databases</id>
    <content type="html"><![CDATA[<p>When you start out as a developer there&rsquo;s an overwhelming amount of things to grasp. First there&rsquo;s the language itself, then all the quirks of the specific framework you&rsquo;re using,and after that (or maybe before) we&rsquo;ll throw front-end development into the mix, and somewhere along the line you have to decide to store your data somewhere.</p>

<p>Early on, with so many things to quickly master, the database tends to be an after-though in application design (perhaps because it doesn&rsquo;t make an impact to end user experience). As a result there&rsquo;s a number of bad practices that tend to get picked up when working with databases, here&rsquo;s a rundown of just a few.</p>

<!--more-->


<h3>1. Storing images</h3>

<p>Images don&rsquo;t belong in your database. Just because you can do something, it doesn&rsquo;t mean you should.Images take up a massive amount of space in databases, and slow applications down by unnecessarily eating your database&rsquo;s IO resources. The most common way this mistake occurs is when new developers base64 encode an image and store it in a database large text/blob field.</p>

<p>The better approach is to upload your images directly to a service like Amazon S3, then store the image URL (hosted by Amazon) in your database as a text field. This way, each time you need to load an image, you need to simply output the image URL into a valid <img> tag. This will greatly improve website responsiveness, and generally help scale web applications.</p>

<h3>2. Limit/Offset</h3>

<p>Pagination is extremely common in a number of applications.As soon as you start to learn SQL, the most straight-forward way to handle pagination is to <code>ORDER BY</code> some column then <code>LIMIT</code> the number of results returned, and for each extra page you&rsquo;ll <code>OFFSET</code> by so many records. This all seems entirely logical, until you realize at any moderate scale:</p>

<ol>
<li>The load this exerts on your database will be painful.</li>
<li>It isn&rsquo;t deterministic, should records change as the user flips between pages.</li>
</ol>


<p>The unfortunate part is: pagination is quite complex, and there isn&rsquo;t a one-size-fits-all solution. For more information on solving pagination problems, you can check <a href="https://www.citusdata.com/blog/1872-joe-nelson/409-five-ways-paginate-postgres-basic-exotic">out numerous options</a></p>

<h3>3. Integer primary keys</h3>

<p>The default for almost all ORMs when creating a primary key is to create a serial field. This is a sequence that auto-increments and then you use that number as your primary key. This seems straight forward as an admin, because you can browse from /users/1 to /users/2, etc. And for most applications this can often be fine. And for most applications, this is fine. But, you&rsquo;ll soon realize as you start to scale that integers primary keys can be exhausted, and are not ideal for large-scale systems. The better approach is to start <a href="https://til.hashrocket.com/posts/31a5135e19-generate-a-uuid-in-postgresql">taking advantage of UUIDs</a> from the start.</p>

<p><em>There&rsquo;s also the bonus advantage of not secretly showcasing how many users/listings/whatever the key references directly to users on accident.</em></p>

<h3>4. Default values on new columns</h3>

<p>No matter how long you&rsquo;ve been at it you won&rsquo;t get the perfect schema on day 1. It&rsquo;s better to think of database schemas as continuously evolving documents. Fortunately, it&rsquo;s easy to add a column to your database, but: it&rsquo;s also easy to do this in a horrific way. By default, if you just add a column it&rsquo;ll generally allow NULL values. This operation is fast, but most applications don&rsquo;t truly want null values in their data, instead they want to set the default value.</p>

<p>If you do add a column with a default value on the table, this will trigger a full re-write of your table. <em>Note: this is very bad for any sizable table on an application.</em> Instead, it&rsquo;s far better to allow null values at first so the operation is instant, then set your default, and then, with a background process go and retroactively update the data.</p>

<p>This is more complicated than it should be, but fortunately there are some <a href="http://pedro.herokuapp.com/past/2011/7/13/rails_migrations_with_no_downtime/">handy guides</a> to help.</p>

<h3>5. Over normalization</h3>

<p>As you start to learn about normalization it feels like the right thing to do. You create a <code>posts</code> table, which contains <code>authors</code>, and each post belongs in a category. So you create a <code>categories</code> table, and then you create a join table <code>post_categories</code>. At the real root of it there&rsquo;s not anything fundamentally wrong with normalizing your data, but at a certain point there are diminishing returns.</p>

<p>In the above case categories could very easily just be an array of varchar fields on a post. Normalization makes plenty of sense, but thinking through it a bit more every time you have a many to many table and wondering if you really need a full table on both sides is worth giving a second thought.</p>

<h3>Conclusion</h3>

<p>When I asked about this on twitter I got a pretty great responses, but they were all over the map. From the basics of never looking at the queries the ORM is generating, to much more advanced topics such as isolation levels. The one I didn&rsquo;t hit on that does seem to be a worthwhile one for anyone building a real world app is indexing. Knowing how <a href="http://www.craigkerstiens.com/2012/10/01/understanding-postgres-performance/">indexing works</a>, and understanding <a href="http://www.craigkerstiens.com/2013/05/30/a-collection-of-indexing-tips/">what indexes</a> you need to create is a critical part of getting good database performance. There&rsquo;s a number of posts on indexing that teach the basics, as well as <a href="http://www.craigkerstiens.com/2013/01/10/more-on-postgres-performance/">practical steps</a> for analyzing performance with Postgres.</p>

<p>In general, I encourage you to treat the database as another tool in your chest as opposed to a necessary evil, but hopefully, the above tips will at least prevent you from making some initial mistakes as you dig in as a beginner.</p>

<p><em>Special thanks to <a href="https://twitter.com/mdeggies">@mdeggies</a> and <a href="https://twitter.com/rdegges">@rdegges</a> for the initial conversation to spark the post at PyCon.</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hands On Postgres Sharding]]></title>
    <link href="http://www.craigkerstiens.com/2016/02/28/Hands-on-postgres-sharding/"/>
    <updated>2016-02-28T00:00:00-08:00</updated>
    <id>http://www.craigkerstiens.com/2016/02/28/Hands-on-postgres-sharding</id>
    <content type="html"><![CDATA[<p>Back in 2012 I wrote an overview of database sharding. Since then I&rsquo;ve had a few questions about it, which have really increased in frequency over the last two months. As a result I thought I&rsquo;d do a deeper dive with some actual hands on for sharding. Though for this hands on, because I do value my time I&rsquo;m going to take advantage of <code>pg_shard</code> rather than creating mechanisms from scratch.</p>

<p>For those unfamiliar <a href="https://github.com/citusdata/pg_shard/">pg_shard</a> is an open source extension from <a href="http://citusdata.com">Citus data</a> who has a commerical product that you can think of is pg_shard++ (and probably much more). Pg_shard adds a little extra to let data automatically distribute to other Postgres tables (logical shards) and Postgres databases/instances (physical shards) thus letting you outgrow a single Postgres node pretty simply.</p>

<p>Alright, enough talk about it, let&rsquo;s get things up and running.</p>

<!--more-->


<h3>Build, install</h3>

<p><em>The rest assume you have Postgres.app, version 9.5 setup and are on a Mac, much of these steps could be easily adapted for other Postgres installs or OSes.</em></p>

<p>PATH=/Applications/Postgres.app/Contents/Versions/latest/bin/:$PATH make</p>

<p>sudo PATH=/Applications/Postgres.app/Contents/Versions/latest/bin/:$PATH make install</p>

<p>cp /Applications/Postgres.app/Contents/Versions/9.5/share/postgresql/postgresql.conf.sample /Applications/Postgres.app/Contents/Versions/9.5/share/postgresql/postgresql.conf.sample</p>

<p>Edit your <code>postgresql.conf</code>:</p>

<pre><code>#shared_preload_libraries = ''
</code></pre>

<p>TO:</p>

<pre><code>shared_preload_libraries = 'pg_shard'
</code></pre>

<p>Then create a file in <code>/Users/craig/Library/Application\ Support/Postgres/var-9.5/pg_worker_list.conf</code> where <code>craig</code> is your username:</p>

<pre><code># hostname port-number
localhost  5432
localhost  5433
</code></pre>

<p>You&rsquo;ll also need to create a new Postgres instance:</p>

<pre><code>initdb -D /Users/craig/Library/Application\ Support/Postgres/var-9.5-2
</code></pre>

<p>Then edit that <code>postgresql.conf</code> inside that newly created folder with two main edits:</p>

<pre><code>port = 5432
</code></pre>

<p>To</p>

<pre><code>port = 5433
</code></pre>

<p>Finally setup our database then start it up:</p>

<pre><code>createdb instagram
postgres -D /Users/craig/Library/Application\ Support/Postgres/var-9.5-2
</code></pre>

<h3>Setup</h3>

<p>Now you should have two running instances of Postgres, now let&rsquo;s finally turn on the pg_shard extension, create some tables and see what we have. First connect to your main running Postgres instance, so in this case the the instagram database we first created <code>psql instagram</code>, then let&rsquo;s set things up:</p>

<pre><code>CREATE EXTENSION pg_shard;
CREATE TABLE customer_reviews (customer_id TEXT NOT NULL, review_date DATE, review_rating INTEGER, product_id CHAR(10));

 CREATE TABLE
 Time: 4.734 ms

SELECT master_create_distributed_table(table_name := 'customer_reviews',                                                                                                     partition_column := 'customer_id');

 master_create_distributed_table
 ---------------------------------

 (1 row)

SELECT master_create_worker_shards(table_name := 'customer_reviews',                                                                                                     shard_count := 16,                                                                                                                                        replication_factor := 2);

 master_create_worker_shards
 -----------------------------

 (1 row)
</code></pre>

<h3>Understanding and using</h3>

<p>So that was a lot of initial setup. But now we have an application that could in theory scale to a shared application across 16 instances. If you want a refresher, there&rsquo;s a difference between physical and logical shards. In this case above we have 16 logical ones and it&rsquo;s replicated across 2 physical Postgres instances albeit on the same instance.</p>

<p>Alright so a little more poking under the covers to see what happened before we actually start doing something with our data. If you&rsquo;re still connected go ahead and run <code>\d</code>, and you should see:</p>

<pre><code>                List of relations
 Schema |          Name          | Type  | Owner
--------+------------------------+-------+-------
 public | customer_reviews       | table | craig
 public | customer_reviews_10000 | table | craig
 public | customer_reviews_10001 | table | craig
 public | customer_reviews_10002 | table | craig
 public | customer_reviews_10003 | table | craig
 public | customer_reviews_10004 | table | craig
 public | customer_reviews_10005 | table | craig
 public | customer_reviews_10006 | table | craig
 public | customer_reviews_10007 | table | craig
 public | customer_reviews_10008 | table | craig
 public | customer_reviews_10009 | table | craig
 public | customer_reviews_10010 | table | craig
 public | customer_reviews_10011 | table | craig
 public | customer_reviews_10012 | table | craig
 public | customer_reviews_10013 | table | craig
 public | customer_reviews_10014 | table | craig
 public | customer_reviews_10015 | table | craig
(17 rows)
</code></pre>

<p>You can see that under the cover there&rsquo;s a lot more <code>customer_reviews</code> tables, in reality you don&rsquo;t have to think about these or do anything with them. But just for reference they&rsquo;re just plain ole Postgres tables under the cover. You can query them and poke at the data. The now mystical <code>customer_reviews</code> will actually roll up the data across all your logical shards (tables) and physical shards (spanning across machines).</p>

<p><em>It&rsquo;s also of note that in production you might not actually use your primary DB as a worker, we did this more for expediency in setting it up on a local Mac. More typically you&rsquo;d have 2 or more workers which are not the same a the primary, these were the ports we setup in our <code>pg_worker_list.conf</code>.</em>    A common setup would look something more like:</p>

<p><img src="https://s3.amazonaws.com/f.cl.ly/items/3T2N2Q1K041g0a0L0j03/Untitled.png?v=7df00f6b" alt="" /></p>

<p>So now start inserting away:</p>

<pre><code>INSERT INTO customer_reviews (customer_id, review_rating) VALUES ('HN802', 5);
INSERT INTO customer_reviews (customer_id, review_rating) VALUES ('FA2K1', 10);
</code></pre>

<p>For extra homework on your own you can now go and poke at where the underlying data actually surfaced.</p>

<h3>Conclusion</h3>

<p>Yes, there&rsquo;s a number of limitations that you can learn a bit more about over on the <a href="https://github.com/citusdata/pg_shard#limitations">github repo for pg_shard</a>. Though even with those it&rsquo;s very usable as is, and let&rsquo;s you get quite far in prepping an app for sharding. While I will say that all apps think they&rsquo;ll need sharding and few actually do, given <code>pg_shard</code> it&rsquo;s minimal extra effort now to plan for such scaling should you need it.</p>

<p>Up next we&rsquo;ll look at how it&rsquo;d work with a few languages, so you can get an idea of the end to end experience.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[What being a PM is really like - Software is easy, People are hard]]></title>
    <link href="http://www.craigkerstiens.com/2016/01/28/On-being-a-PM-software-is-easy-people-are-hard/"/>
    <updated>2016-01-28T00:00:00-08:00</updated>
    <id>http://www.craigkerstiens.com/2016/01/28/On-being-a-PM-software-is-easy-people-are-hard</id>
    <content type="html"><![CDATA[<p>In recent months I&rsquo;ve had the question nearly once a week about advice/tips for becoming a Product Manager or more commonly referred to as PM. These are generally coming from people that are either currently engineers, or previously were and are in some engineer/customer role such as a sales engineer or solution architect. There&rsquo;s a number of <a href="http://www.amazon.com/Inspired-Create-Products-Customers-Love/dp/0981690408?tag=mypred-20">high level</a> pieces talking about PM and it often feels glorious, I mean you get to make product decisions right? You get to call some shots. Well that sometimes may be true, but don&rsquo;t assume it&rsquo;s all rainbows and sparkles.</p>

<p>Especially as a first time PM what your day to day will look like won&rsquo;t be debating strategy all day long. Here&rsquo;s a few of the good and the bad sides of being a PM.</p>

<!--more-->


<h3>Plenty of grunt work</h3>

<p>While you may get to make a decision or two, the bulk of your time will not be thinking about grandiose visions, instead you&rsquo;ll be doing a lot to gather data. There&rsquo;s a lot of means for gathering data across lots of sources, the more you use the better you&rsquo;ll be. Knowing the ones you steer towards, as well as ones you steer away from is useful so you can balance a bias more fairly. For myself SQL is a go-to, then customer interactions both qualitative and quantitative such as surveys, following what media is saying about your space is important as well. And while user studies are often relegated to design and UX, as a PM you need to make sure it at least happens (<a href="http://www.invisionapp.com/">Invision App</a> is a favorite for lightweight tests).</p>

<p>In a given week I probably spend 10 hrs interacting with customers, looking at data, and sadly that&rsquo;s probably not enough.</p>

<p><em>A few practical examples of this</em></p>

<p>Each morning I send emails to 10-20 users who used the product for the first time, yes this is automated but carving out 30 minutes of my day to actually follow-up with each of them is less automated.</p>

<p>Another example is keeping a health of business dashboard up to date. Personally I use google sheets for this. Within one spreadsheet I have monthly and weekly targets as well as how we’re tracking against them. These are all updated on actual real time data, powered by Heroku’s dataclips with a simple <code>=importCSV(‘http://dataclips.heroku.com/abcdefghij….csv’)</code>. In total my google spreadsheets has 1 high level overview, with about 20 underlying sheets that do all of the computations. In any given month 1 of my key 4-5 goals may be missed, which then spawns digging in deeper to figure out why and what we can do about it.</p>

<h3>Dictating vs. consensus</h3>

<p>From a product decision making perspective you can force alignment by explicitly making every decision, or you can allow decisions to be made as a group voting if needed. Expect to use some balance of both of these among the team, and neither is never perfect. When it comes to outside the team you may still use both, but steer more strongly one way or the other. For example with the executive team it may be more consensus, with marketing it may be dictating your product roadmap which they can help support.</p>

<p>Even within the team there will be times a decision must be made and there will be some people that don&rsquo;t align. It&rsquo;s key that you make the decision clearly and explicitly. Even though some individuals don&rsquo;t like it, they won&rsquo;t fight against it&hellip; unless you make a habit of taking the input, then discarding it and going along your &lsquo;intuition&rsquo;. Even when there&rsquo;s a strong case based on the data it may not be as clear as you think.</p>

<p>In contrast, decision making by consensus most people will feel happier that they provided input into the product. If you take everyone&rsquo;s input expect to end up with a product that feels like 10 people designed it, needless to say incoherent.</p>

<p>As a PM expect to do a lot of listening, a good bit of convincing, and some occasional big decision making.</p>

<h3>The pain you feel inside the building doesn&rsquo;t matter</h3>

<p>You may think you&rsquo;re solving a problem that exists for users, when in reality there was no problem at all. This is just a reminder that you need to keep empathy in mind above so much else.</p>

<p>As an example, once a data team put in place a tool, supposedly for me. I looked at the tool and more or less didn&rsquo;t understand why it was in place. They proceeded to explain that my problem was it took me too long to write SQL, so this tool will help me get the reports I need without SQL. At that point I proceeded to actually list off all the issues I did have, none of which <a href="http://www.craigkerstiens.com/categories/postgres/">were SQL</a>.</p>

<p>Prescribing a solution without knowing clearly <strong>from customers</strong> what the problem is will leave you in a bad spot. All this means you have to set aside building the tool you want to use, and make sure you know what the <a href="http://headrush.typepad.com/creating_passionate_users/2005/01/keeping_users_e.html">customer wants</a>.</p>

<h3>Marketing is your job</h3>

<p>Not external marketing, though often that work may still fall to you, but rather internal marketing.</p>

<p>It’s important that you internally market the wins for your <em>team</em>. These wins should very much be for the team, and not for your own benefit. The best PMs seem to disappear into the background, this is because you’re more surfacing all the work your team is doing than any of the details you helped coordinate. This is often counter to our natural instinct to tout our own accomplishments. This is only exaggerated in PM role, one where things can still ship if you’re not there, so there can often be a tendency to try to highlight the roles value. Fight that urge to self market.</p>

<p><img src="https://s3.amazonaws.com/f.cl.ly/items/412j330z173E1d432M05/Untitled.png?v=4ceec9d2" style="float:right; width:50%; margin-left:20px;" /></p>

<p>Rest assured though–getting the team focused on solving the right problems, and then surfacing their wins will only help you go faster.</p>

<h3>On leading</h3>

<p><img src="https://s3.amazonaws.com/f.cl.ly/items/3E2c3k1p1j2g2O1O0b0L/Untitled.png?v=9daf9e58" style="float:right; width:50%; margin-left:20px;margin-bottom:15px;" />
You’ll have to lead at times, follow at others, and all of this will likely be with no reports. Don’t confuse a lack of engineers reporting to you (which they should not, a common team structure can be seen on the right) for not needing to lead the team at times. <em>For those less familiar it’s very rare for a PM to have engineers report to them, though occasionally designers will. It’s typically the cross-reporting structure you’ll find talked about by Andy Grove in <a href="http://www.amazon.com/High-Output-Management-Andrew-Grove/dp/0679762884?tag=mypred-20">High output management</a>.</em> If the team is firing on all cylinders, knows the direction, and executing then step back and let things roll forward. If that’s not the case and leadership around direction or otherwise is needed be prepared to step up.</p>

<p>At the end of the day ensuring the product is advancing is your job, so be prepared to do what you need to whether it’s leading or not to accomplish that.</p>

<h3>It’s not all rainbows, but it is fun</h3>

<p>The range of things you’ll have to focus on can be diverse and complex. In the end if you get a rush out of shipping and launching products, then all the work that goes into it can make it all worthwhile. It’s as much about figuring out what customers want and then getting your team building the right thing. For a first time PM it can be summed up by the notion that software is easy, people are hard.</p>

<p><em>Special thanks to <a href="http://www.twitter.com/lukasfittl">Lukas Fittl</a> and <a href="http://www.twitter.com/iamclovin">Arun Thampi</a> for reviews and feedback on this post.</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Marketing definitions for developers]]></title>
    <link href="http://www.craigkerstiens.com/2016/01/17/marketing-definitions-for-developers/"/>
    <updated>2016-01-17T00:00:00-08:00</updated>
    <id>http://www.craigkerstiens.com/2016/01/17/marketing-definitions-for-developers</id>
    <content type="html"><![CDATA[<p>Marketing often feels like a dirty-icky thing to many developers. Well until you feel like you have a great product, but no one using it then you have to get a crash course in all of that. And while I might cover some of the actual basics in the future, just knowing what marketing people actually mean when they’re talking can be a huge jump start. Here&rsquo;s a guide that distills many of the acronyms and terms down to what they actually mean in reality.</p>

<!--more-->


<p><strong>SEO &ndash; Search engine optimization.</strong> There&rsquo;s two sides to this, one where you&rsquo;re attempting to game the system known known as black hat. The other is simply creating good content.</p>

<p>Tip: Now, unlike several years ago social sharing helps impact this.</p>

<p><strong>SEM &ndash; Search engine marketing.</strong> The short of this is adwords, but broadly it&rsquo;s any search engine.</p>

<p>Tip: Be wary here, you can spend a lot of money quickly. Properly managing it takes time and effort otherwise you&rsquo;re wasting money.</p>

<p><strong>Display ads</strong> &ndash; Banner ads on websites. There&rsquo;s a few common form factors in this world, so you&rsquo;ll create a few then reuse them across lots of properties.</p>

<p>Tip: Results may vary here, there are some hidden gems when advertising on various long tail sites.</p>

<p><strong>Retargeting</strong> &ndash; This is where you&rsquo;re serving an ad (most commonly display) to someone that&rsquo;s previously visited your site. The process happens due to you &lsquo;pixeling&rsquo; them, and a cookie being set so the ad server knows they&rsquo;ve seen you.</p>

<p>Tip: Generally good bang for the buck here, but you still need initial visitors to even retarget to.</p>

<p><strong>Funnel</strong> &ndash; The process of someone going from finding you to paying to paying more. Generally a process will look something like: Anonymous visitor by referral, sign ups, low money bucket, big money bucket.</p>

<p><strong>Top of the funnel</strong> &ndash; Hopefully clear from the previous one, top of the funnel would be the max of users you reach out to or get to your site, usually down to getting them to sign up.</p>

<p><strong>Bottom of the funnel</strong> &ndash; This is usually going from time you have a user to customer and then growing that customer via cross-selling and upselling.</p>

<p><strong>Drip marketing</strong> &ndash; This is the process of gradually sending emails/notifications to your customers to get them to engage and learn about the product. Think of it as a welcome email on day 1, an intro on day 3, and on day 5 a different email based on what they&rsquo;ve done so far. Really good drip marketing will create a different email for the user based on what they have or haven&rsquo;t done.</p>

<p><strong>Attribution (last/first/multi)</strong> &ndash; Attribution relates to how you got the user or customer (via web referral). There&rsquo;s a few different ways of looking at this, last touch is the last website they visited before signing up, first touch is the first referral they were sent from, and multi touch (often more complicated to put in place) attributes something to all referrals they&rsquo;ve come from.</p>

<p><strong>AR &ndash; Analyst relations</strong>. Analysts cover particular products or areas in an industry, write reports, and often consult with large enterprises when making buying decisions. Analyst relations or AR is the common term for interacting with them, you can <a href="http://www.craigkerstiens.com/2015/07/25/A-guide-to-analyst-relations-for-startups/">learn more here</a></p>

<p><strong>PR &ndash; Public relations</strong>. This is generally the press/media side. It often involves launches, press releases, pitching media etc. You can read more of a <a href="http://www.craigkerstiens.com/2015/07/21/An-intro-PR-guide-for-startups/">guide on it here</a></p>

<p><strong>Briefing</strong> &ndash; This is normally with an analyst or press, and is typically a quick 30 minute call occasionally a demo of an upcoming launch.Usually</p>

<p><strong>Inquiry</strong> &ndash; This refers more to the analyst side. Where a briefing is often more one sided for you to pitch/update them on what you’ve been doing, an inquiry is more a back and forth where you can ask what they’re seeing in the market and for input on direction.</p>

<p><strong>Campaign</strong> &ndash; A collection of activities that go on around a certain thing focused on specific keywords or theme. This can be as little as a search engine marketing campaign which is the most common, or much larger and coordinated with billboards, webinars, etc.</p>

<p><strong>Lead Gen</strong> &ndash; The sales funnel usually goes from just getting an email, to talking to them, to getting them to try a demo or run a POC, to eventually buying. Lead gen is the activity of just getting that initial contact so you can then further engage with them. In practice this can often involve giving something away, like a t-shirt in exchange for an email.</p>

<h3>Conclusion</h3>

<p>While this doesn&rsquo;t cover every marketing activity under the sun, hopefully it&rsquo;s a good primer on things you may have heard but been confused by. If there&rsquo;s important ones I&rsquo;ve missed please feel free to let me know <a href="http://www.twitter.com/craigkerstiens">@craigkerstiens</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Writing more legible SQL]]></title>
    <link href="http://www.craigkerstiens.com/2016/01/08/writing-better-sql/"/>
    <updated>2016-01-08T00:00:00-08:00</updated>
    <id>http://www.craigkerstiens.com/2016/01/08/writing-better-sql</id>
    <content type="html"><![CDATA[<p>A number of times in a crowd I&rsquo;ve asked how many people enjoy writing SQL, and often there&rsquo;s a person or two. The follow up is how many people enjoy reading other people&rsquo;s SQL and that&rsquo;s unanimously 0. The reason for this is that so many people write bad SQL. It&rsquo;s not that it doesn&rsquo;t do the job, it&rsquo;s just that people don&rsquo;t tend to treat SQL the same as other languages and don&rsquo;t follow strong code formatting guidelines. So, of course here&rsquo;s some of my own recommendations on how to make SQL more readable.</p>

<!--more-->


<h3>One thing per line</h3>

<p>Only put a single column/table/join per line. This is going to make for slightly more verbose SQL, but it will be easier to read and edit.. Here&rsquo;s a basic example:</p>

<pre><code>SELECT foo,
       bar
FROM baz
</code></pre>

<h3>Align your projections and conditions</h3>

<p>You can somewhat see this in the above with <code>foo</code> and <code>bar</code> being on the same line. This is reasonably common for columns you&rsquo;re selecting, but it&rsquo;s not applied as often in <code>AND</code> or <code>GROUP BY</code> clauses. As you can see there is a difference though between:</p>

<pre><code>SELECT foo,
       bar
FROM baz
WHERE foo &gt; 3
AND baz = 'craig.kerstiens@gmail.com'
</code></pre>

<p>And a cleaner version:</p>

<pre><code>SELECT foo,
       bar
FROM baz
WHERE foo &gt; 3
  AND baz = 'craig.kerstiens@gmail.com'
</code></pre>

<h3>Use column names when grouping/ordering</h3>

<p>This is personally an awful habit of mine, but it is extremely convenient to just order by the column number. In the above query we could just <code>ORDER BY 1</code>. This is especially easy when column 1 may be something like SUM(foo). However, ensuring you explicitly <code>ORDER BY SUM(foo)</code> will help limit any misunderstanding of the data.</p>

<h3>Comments</h3>

<p>You comment your code all the time, yet so few seem to comment their queries. A simple <code>--</code> allows you to inline a comment, perhaps where there&rsquo;s some oddities to what you&rsquo;re joining or just anywhere it may need clarification. You can of course <a href="http://www.craigkerstiens.com/2013/07/29/documenting-your-postgres-database/">go much further</a>, but at least some basic level of commenting should be required.</p>

<h3>Casing</h3>

<p>As highlighted in these examples, having a standard for how you case your queries is especially handy. Sticking with all SQL keywords in caps allows you to easily parse what is SQL and what are columns or literals that you&rsquo;re using in queries.</p>

<h3>CTEs</h3>

<p>First, yes they can be an optimisation boundary. But they can also make your query much more read-able and prevent you from doing the wrong thing because you couldn&rsquo;t reason about a query.</p>

<p>For those unfamiliar CTEs are like a view that exist just for the duration of that query being executed. You can have them reference previous CTEs so you can gradually build on them, much like you would code blocks. I won&rsquo;t repeat too much of what <a href="http://www.craigkerstiens.com/2013/11/18/best-postgres-feature-youre-not-using/">I&rsquo;ve already written about them</a>, but if you&rsquo;re unfamiliar with them or not using them <a href="http://www.craigkerstiens.com/2013/11/18/best-postgres-feature-youre-not-using/">they are a must</a>. CTEs are easily one of the few pieces of SQL that I use on a daily basis.</p>

<h3>Conclusion</h3>

<p>Of course this isn&rsquo;t the only way to make your SQL more readable and this isn&rsquo;t an exhaustive list. But hopefully you find these tips helpful, and for your favorite tip that I missed&hellip; let me know about it <a href="http://www.twitter.com/craigkerstiens">@craigkerstiens</a>.</p>

<p><em>A special thanks to <a href="http://www.twitter.com/Case">@Case</a> for reviewing.</em></p>

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/517fd07cf1409000020002dc.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[My top 10 Postgres features and tips for 2016]]></title>
    <link href="http://www.craigkerstiens.com/2015/12/29/my-postgres-top-10-for-2016/"/>
    <updated>2015-12-29T00:00:00-08:00</updated>
    <id>http://www.craigkerstiens.com/2015/12/29/my-postgres-top-10-for-2016</id>
    <content type="html"><![CDATA[<p>I find during the holiday season many pick up <a href="http://www.amazon.com/Hard-Thing-About-Things-Building/dp/0062273205/ref=sr_1_1?ie=UTF8&amp;qid=1451407536&amp;sr=8-1&amp;keywords=hard+thing+about&amp;tag=mypred-20">new books</a>, learn a <a href="http://crystal-lang.org/">new language</a>, or brush up on some other skill in general. Here&rsquo;s my contribution to hopefully giving you a few new things to learn about Postgres and ideally utilize in the new year. It&rsquo;s not in a top 10 list as much as 10 tips and tricks you should be aware of as when you need them they become incredibly handy. But, first a shameless plug if you find any of the following helpful, consider subscribing to <a href="http://www.postgresweekly.com">Postgres weekly</a> a weekly newsletter with interesting Postgres content.</p>

<!--more-->


<h3>1. CTEs &ndash; Common Table Expressions</h3>

<p>CTEs allow you to do crazy awesome things like recursive queries but even the most simple form of them I don&rsquo;t go a day without using. Think of a CTE or commonly known as with clause as a view inside the time that query is running. This lets you more easily create readable query. Any query that&rsquo;s constructed that&rsquo;s even <a href="http://www.craigkerstiens.com/2013/11/18/best-postgres-feature-youre-not-using/">100 lines long</a>, but with 4-5 CTEs is undoubtedly going to be easier for someone new to come in and understand than a 20 line query that does the same thing. A few people like writing SQL, but no one likes reading someone else&rsquo;s so do them a favor and read up on CTEs.</p>

<h3>2. Setup a .psqlrc</h3>

<p>You setup a bashrc, vimrc, etc. Why not do the same for Postgres. Some of the great things you can do:</p>

<ul>
<li>Setup pretty formatting by default with <code>\x auto</code></li>
<li>Set nulls to actually look like something <code>\pset null ¤</code></li>
<li>Turn timing on by default <code>\timing on</code></li>
<li>Customize your prompt <code>\set PROMPT1 '%[%033[33;1m%]%x%[%033[0m%]%[%033[1m%]%/%[%033[0m%]%R%# '</code></li>
<li>Save commonly run queries that you can run by name</li>
</ul>


<p>Here&rsquo;s an example of my own <code>psqlrc</code>:</p>

<pre><code>\set QUIET 1
\pset null '¤'

-- Customize prompts
\set PROMPT1 '%[%033[1m%][%/] # '
\set PROMPT2 '... # '

-- Show how long each query takes to execute
\timing

-- Use best available output format
\x auto
\set VERBOSITY verbose
\set HISTFILE ~/.psql_history- :DBNAME
\set HISTCONTROL ignoredups
\set COMP_KEYWORD_CASE upper
\unset QUIET
</code></pre>

<h3>3. pg_stat_statements for where to index</h3>

<p><code>pg_stat_statements</code> is probably the single most valuable tool for improving performance on your database. Once enabled (with <code>create extension pg_stat_statements</code>) it automatically records all queries run against your database and records often and how long they took. This allows you to then go and find areas you can optimize to get overall time back with one simple query:</p>

<pre><code>SELECT 
  (total_time / 1000 / 60) as total_minutes, 
  (total_time/calls) as average_time, 
  query 
FROM pg_stat_statements 
ORDER BY 1 DESC 
LIMIT 100;
</code></pre>

<p><em>Yes, there is some performance cost to leaving this always on, but it&rsquo;s pretty small. I&rsquo;ve found it&rsquo;s far more useful to be on and get major performance wins vs. the small cost of it always recording.</em></p>

<p>You can read much more on Postgres performance on a <a href="http://www.craigkerstiens.com/2013/01/10/more-on-postgres-performance/">previous post</a></p>

<h3>4. Slow down with ETL, use FDWs</h3>

<p>If you have a lot of <em>microservices</em> or different apps then you likely have a lot of different databases backing them. The default for about anything you want to do is do create some data warehouse and ETL it all together. This often goes a bit too far to the extreme of aggregating <strong>everything</strong> together.</p>

<p>For the times you just need to pull something together once or on rare occasion <a href="http://www.craigkerstiens.com/2013/08/05/a-look-at-FDWs/">foreign data wrappers</a> will let you query from one Postgres database to another, or potentially from Postgres to anything else such as <a href="https://github.com/citusdata/mongo_fdw">Mongo</a> or Redis.</p>

<h3>5. array and array_agg</h3>

<p>There&rsquo;s little chance if you&rsquo;re building an app you&rsquo;re not using arrays somewhere within it. There&rsquo;s no reason you shouldn&rsquo;t be doing the same within your database as well. Arrays can be just another datatype within Postgres and have some great use cases like tags for blog posts directly in a single column.</p>

<p>But, even if you&rsquo;re not using arrays as a datatype there&rsquo;s often a time when you want to rollup something like an array in a query then comma separate it. Something similar to the following could allow you to easily roll up a comma separated list of projects per user:</p>

<pre><code>SELECT 
  users.email,
  array_to_string(array_agg(projects.name), ',')) as projects
FROM
  projects,
  tasks,
  users
WHERE projects.id = tasks.project_id
  AND tasks.due_at &gt; tasks.completed_at
  AND tasks.due_at &gt; now()
  AND users.id = projects.user_id
GROUP BY 
  users.email
</code></pre>

<h3>6. Use materialized views cautiously</h3>

<p>If you&rsquo;re not familiar with materialized view they&rsquo;re a query that has been actually created as a table. So it&rsquo;s a materialized or basically snapshotted version of some query or &ldquo;view&rdquo;. In their initial version materialized versions, which were long requested in Postgres, were entirely unusuable because when you it was a locking transaction which could hold up other reads and acticities avainst that view.</p>

<p>They&rsquo;ve since gotten much better, but there&rsquo;s no tooling for refreshing them out of the box. This means you have to setup some scheduler job or cron job to regularly refresh your materialized views. If you&rsquo;re building some reporting or BI app you may undoubtedly need them, but their usability could still be advanced so that Postgres knew how to more automatically refresh them.</p>

<p><em>If you&rsquo;re on Postgres 9.3, the above caveats about preventing reads still does exist</em></p>

<h3>7. Window functions</h3>

<p>Window functions are perhaps still one of the more complex things of SQL to understand. In short they let you order the results of a query, then compute something from one row to the next, something generally hard to do without procedural SQL. You can do some very basic things with them such as rank where <a href="http://postgresguide.com/sql/window.html">each result appears</a> ordered by some value, or something more complex like compute <a href="http://www.craigkerstiens.com/2014/02/26/Tracking-MoM-growth-in-SQL/">MoM growth directly in SQL</a>.</p>

<h3>8. A simpler method for pivot tables</h3>

<p>Table_func is often referenced as the way to compute a pivot table in Postgres. Sadly though it&rsquo;s pretty difficult to use, and the more basic method would be to just do it with raw SQL. This will get much better with <a href="http://www.craigkerstiens.com/2015/12/27/postgres-9-5-feature-rundown/">Postgres 9.5</a>, but until then something where you sum up each condition where it&rsquo;s true or false and then totals is much simpler to reason about:</p>

<pre><code>select date,
       sum(case when type = 'OSX' then val end) as osx,
       sum(case when type = 'Windows' then val end) as windows,
       sum(case when type = 'Linux' then val end) as linux
from daily_visits_per_os
group by date
order by date
limit 4;
</code></pre>

<p><em>Example query courtesy of <a href="http://www.twitter.com/tapoueh">Dimitri Fontaine</a> and <a href="http://tapoueh.org/blog/2013/07/04-Simple-case-for-pivoting">his blog</a>.</em></p>

<h3>9. PostGIS</h3>

<p>Sadly on this one I&rsquo;m far from an expert. PostGIS is arguably the best option of any GIS database options. The fact that you get all of the standard Postgres benefits with it makes it even more powerful–a great example of this is GiST indexes which came to Postgres in recent years and offers great performance gains for PostGIS.</p>

<p>If you&rsquo;re doing something with geospatial data and need something more than the easy to use <code>earth_distance</code> extension then crack open PostGIS.</p>

<h3>10. JSONB</h3>

<p>I almost debated leaving this one off the list, ever since Postgres 9.2 JSON has been at least one of the marquees in each Postgres release. JSON arrived with much hype, and JSONB fulfilled on the initial hype of Postgres starting to truly compete as a document database. JSONB only continues to become more powerful with <a href="http://www.craigkerstiens.com/2015/12/08/massive-json/">better libraries</a> for taking advantage of it, and it&rsquo;s <a href="https://wiki.postgresql.org/wiki/What's_new_in_PostgreSQL_9.5#JSONB-modifying_operators_and_functions">functions improving</a> with each release.</p>

<p>If you&rsquo;re doing anything with JSON or playing with another document database and ignoring JSONB you&rsquo;re missing out, of course don&rsquo;t forget the GIN and GiST indexes to really get the benefits of it.</p>

<h3>The year ahead</h3>

<p>Postgres 9.5/9.6 should continue to improve and bring many new features in the years ahead, what&rsquo;s your preference for something that doesn&rsquo;t exist yet but you do want to see land in Postgres. Let me know <a href="http://www.twitter.com/craigkerstiens">@craigkerstiens</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Postgres 9.5 - The feature rundown]]></title>
    <link href="http://www.craigkerstiens.com/2015/12/27/postgres-9-5-feature-rundown/"/>
    <updated>2015-12-27T00:00:00-08:00</updated>
    <id>http://www.craigkerstiens.com/2015/12/27/postgres-9-5-feature-rundown</id>
    <content type="html"><![CDATA[<p>The headline of Postgres 9.5 is undoubtedly: Insert&hellip; on conflict do nothing/update or more commonly known as Upsert or Merge. This removes one of the last remaining features which other databases had over Postgres. Sure we&rsquo;ll take a look at it, but first let&rsquo;s browse through some of the other features you can look forward to when Postgres 9.5 lands:</p>

<!--more-->


<h3>Grouping sets, cube, rollup</h3>

<p>Pivoting in Postgres has <a href="http://www.craigkerstiens.com/2013/06/27/Pivoting-in-Postgres/">sort of been possible</a> as has rolling up data, but it required you to know what those values and what you were projecting to, to be known. With the new functionality to allow you to group various sets together rollups as you&rsquo;d normally expect to do in something like Excel become trivial.</p>

<p>So now instead you simply add the grouping type just as you would on a normal group by:</p>

<pre><code>SELECT department, role, gender, count(*)
FROM employees
GROUP BY your_grouping_type_here;
</code></pre>

<p>By simply selecting the type of rollup you want to do Postgres will do the hard work for you. Let&rsquo;s take a look at the given example of department, role, gender:</p>

<ul>
<li><code>grouping sets</code> will project out the count for each specific key. As a result you&rsquo;d get each department key, with other keys as null, and the count for each that met that department.</li>
<li><code>cube</code> will give you the same values as above, but also the rollups of every individual combination. So in addition to the total for each department, you&rsquo;d get breakups by the department and gender, and department and role, and department and role and gender.</li>
<li><code>rollup</code> will give you a slightly similar version to cube but only give you the detailed groupings in the order they&rsquo;re presented. So if you specified <code>roll (department, role, gender)</code> you&rsquo;d have no rollup for department and gender alone.</li>
</ul>


<p><em>Check the what&rsquo;s new wiki for a bit more clarity on <a href="https://wiki.postgresql.org/wiki/What's_new_in_PostgreSQL_9.5#GROUPING_SETS.2C_CUBE_and_ROLLUP">examples and output</a></em></p>

<h3>Import foreign  schemas</h3>

<p>I only use foreign tables about once a month, but when I do use them they&rsquo;ve inevitably saved many hours of creating a one off ETL process. Even still the effort to setup new foreign tables has shown a bit of their infancy in Postgres. Now once you&rsquo;ve setup your foreign database, you can import the schema, either all of it or specific tables you prefer.</p>

<p>It&rsquo;s as simple as:</p>

<pre><code>IMPORT FOREIGN SCHEMA public
FROM SERVER some_other_db INTO reference_to_other_db;
</code></pre>

<h3>pg_rewind</h3>

<p>If you&rsquo;re managing your own Postgres instance for some reason and running HA, pg_rewind could become especially handy. Typically to spin up replication you have to first download the physical, also known as base, backup. Then you have to replay the Write-Ahead-Log or WAL–so it&rsquo;s up to date then you actually flip on replication.</p>

<p>Typically with databases when you fail over you shoot the other node in the head or <a href="https://en.wikipedia.org/wiki/STONITH">STONITH</a>. This means just get rid of it, completely throw it out. This is still a good practice, so bring it offline, make it inactive, but from there now you could then flip it into a mode and use pg_rewind. This could save you pulling down lots and lots of data to get a replica back up once you have failed over.</p>

<h3>Upsert</h3>

<p>Upsert of course will be the highlight of Postgres 9.5. I already talked about it some when <a href="http://www.craigkerstiens.com/2015/05/08/upsert-lands-in-postgres-9.5/">it initially landed</a>. The short of it is, if you&rsquo;re inserting a record and there&rsquo;s a conflict, you can choose to:</p>

<ul>
<li>Do nothing</li>
<li>Do some form of update</li>
</ul>


<p>Essentially this will let you have the typically experience of create or update that most frameworks provide but without a potential race condition of incorrect data.</p>

<h3>JSONB pretty</h3>

<p>There&rsquo;s a few updates <a href="https://wiki.postgresql.org/wiki/What's_new_in_PostgreSQL_9.5#JSONB-modifying_operators_and_functions">to JSONB</a>. The one I&rsquo;m most excited about is making JSONB output in psql read much more legibly.</p>

<p>If you&rsquo;ve got a JSONB field just give it a try with:</p>

<pre><code>SELECT jsonb_pretty(jsonb_column)
FROM foo;
</code></pre>

<h3>Give it a try</h3>

<p>Just in time for the new year <a href="http://www.postgresql.org/about/news/1631/">the RC is ready</a> and you can get hands on with it. Give it a try, and if there&rsquo;s more you&rsquo;d like to hear about Postgres please feel free to drop me a note <a href="mailto:craig.kerstiens@gmail.com">craig.kerstiens@gmail.com</a>.</p>

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/517fd07cf1409000020002dc.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Going from blog posts to full launches]]></title>
    <link href="http://www.craigkerstiens.com/2015/12/26/from-blog-posts-to-launches/"/>
    <updated>2015-12-26T00:00:00-08:00</updated>
    <id>http://www.craigkerstiens.com/2015/12/26/from-blog-posts-to-launches</id>
    <content type="html"><![CDATA[<p>I recall extremely early stage where you&rsquo;d build a feature, realize it was awesome, then the next day write a blog post for it. At some point you start to move from that to more coordinated launches. A larger coordinated launch allows you to reach a bigger audience, can lead to bigger deals, and help expand your overall market. But perhaps more importantly by the time you hit full launch you&rsquo;ve message tested and ensured it&rsquo;s going to resonate in the way you expect.</p>

<p><em>The process itself will both help amplify and validate/refine your message</em></p>

<p>This is often a more gradual process than a sudden single change, you&rsquo;ll introduce new parts of this in time. And for many what an entire launch process looks like comes by trial an error, to help shorten that learning curve here&rsquo;s key areas I pay attention for a launch and process followed by a rough timeline.</p>

<!--more-->


<h3>Product first</h3>

<p>Making sure the product is in the right shape is key to any big launch. You don&rsquo;t get a second shot and if the product isn&rsquo;t in shape customers often won&rsquo;t take a second look at it later. For this reason I strongly prefer to have your product locked and loaded before you even start talking launch times, or at least be in the bug clean up phase. This means you&rsquo;ve built a feature, validated with alpha users or private beta, and are ready to open it up to the world.</p>

<p>If you have to set a launch date without the product or feature being already done allow padding. Sometimes it&rsquo;s good for the team to know the padding, sometimes it isn&rsquo;t. When you have extra time it&rsquo;s not uncommon for your development to magically consume exactly that amount of time and still result in a small scramble towards the end.</p>

<p>A good driver I&rsquo;ve found is needing to have it fully like to demo a few weeks out from the launch itself, such as during <a href="">analyst pre-briefings</a>.</p>

<h3>Crafting your message</h3>

<p>Every launch is an opportunity to tell your core message and value prop. If you miss this opportunity for focusing on a single narrow feature you&rsquo;ve missed the biggest opportunity you had in a launch. You can&rsquo;t relaunch your full product every time though–you do need some big improvements or feature that you can highlight, but you should still hit your core message.</p>

<p>First you should know that your feature solves some specific problem, you should know this from the alpha/beta testing and if it doesn&rsquo;t solve this problem <a href="http://www.craigkerstiens.com/2014/08/13/when-to-ship-when-to-kill/">you&rsquo;re not ready to launch</a>. Yes, some people will launch a product before the product is completely there–this is common in a marketing driven company as opposed to a product/engineering driven company.</p>

<p>Your message should lead with the problem you&rsquo;re solving, not the laundry list of features. The best launches lead with some  broader thematic message, even better if it&rsquo;s an altruistic world changing one. A rough example of this:</p>

<p>To the point to the product, and probably over generalized as boring:</p>

<ul>
<li>Connectify brings a new way of taking your dumb devices at home and turning them into intelligent connected devices.</li>
</ul>


<p>In contrast, broad thematic message, followed lightly by the product.</p>

<ul>
<li>We live in a connected world, and with new connected devices there&rsquo;s the opportunity not just give you more data but help you improve how you live your life. Connectify helps you at bringing the devices that matter together with ease.</li>
</ul>


<h3>Testing your message</h3>

<p>You should treat your message just like a product, testing it gradually along the way. Once you&rsquo;ve got some initial framing of it, test it internally, then with friendly customers or community members. Leading up to the launch I usually have a timeline and get all the content and communication rolling about 3 weeks out. I&rsquo;ll give a bit of a timeline below but first some more around message testing</p>

<h4>Analysts</h4>

<p>If you regularly use <a href="http://www.craigkerstiens.com/2015/07/25/A-guide-to-analyst-relations-for-startups/">any analysts</a> you should absolutely use them to help with a launch. Several weeks out is a great time to test key messages with them, get feedback, and if you&rsquo;re lucky you may even get them to provide a quote for the launch.</p>

<p>Keep in mind here a inquiry is an opportunity to test your message and get feedback. You should talk roughly half of the time here, they should be talking the other half. In contrast briefings before launch you should have your message fully baked and should simply be pitching your message and possibly demo-ing.</p>

<h4>Friendlies</h4>

<p>This may be more contentious, but at least at early stage sharing drafts with friendly community members is a great way to get feedback and refine your message. Here you should be especially concious of the request of their time and expect to have some delay before they get back to you. Being top secret about your message ahead of time won&rsquo;t add much value to it being a home run, where as better ensuring it resonates will help it to be more successful.</p>

<h4>Customers</h4>

<p>Customers I call out as a separate bucket. Customers have less incentive to leak your news than friendlies, but also fall somewhere on the other spectrum of analysts. A key piece about customers is there is an opportunity for them to be a launch partner. And so on to that topic:</p>

<h3>Launch partners</h3>

<p>Press and others like seeing and knowing you have external validation. Similarly many see the benefit of being part of a launch, after all it&rsquo;s more free press for them. For a launch partner there are various levels, though for most providing some quote is a pretty common level.</p>

<p>The best way to do this is talk to them about what they like about the feature/product and take a first stab at the quote for them from their feedback. Some may very much want to wordsmith their own which is fine, but minimizing the work required of them while–trying to hit something they&rsquo;d say as well–as a message that flows can best be done by you taking a first pass.</p>

<p>Further there&rsquo;s varying levels of value with quotes and references. In descending order:</p>

<ol>
<li>Customers</li>
<li>Analysts</li>
<li>Community Members</li>
</ol>


<h3>The other details</h3>

<p>During launch week I mostly want to be dotting i&rsquo;s and crossing t&rsquo;s, meaning: I want the product done. I want documentation done. I want the blog post finalized. I want to be in the mode of send internal announcements, prep internal teams, talk to media.</p>

<h4>Prepping internal teams</h4>

<p>Obviously the engineering and product people involved will be in the loop. But you need to notify many others some of which should have been in the loop already, some less so:</p>

<ul>
<li>Support &ndash; There&rsquo;s a new product surface area, support should be top of your list so they can field the tickets and questions that come in</li>
<li>Sales &ndash; Even if there is no price change or impact, new features allow sales to communicate value to customers</li>
</ul>


<h3>Timeline</h3>

<p>Finally what&rsquo;s the end to end timeline look like with all the little details. Here&rsquo;s a rough one that&rsquo;s fully built out. IF you&rsquo;re smaller and don&rsquo;t have a regular cadence of analysts in hand then just expect that doesn&rsquo;t apply. IF your support team is the product and engineers maybe that&rsquo;s lighter weight. Basically feel free to take out parts, but expect your process to grow to something of this size.</p>

<ul>
<li>4 weeks out &ndash; Outline of blog post with key messages</li>
<li>Test that outline internally</li>
<li>3 weeks out &ndash; Start to get a rough draft in place</li>
<li>3 weeks out &ndash; Share internally and with friendlies. At this point you&rsquo;re explicitely looking for message feedback. Tell people to not waste time on nitpicks of words or grammar, it will be 98% re-written by the time you&rsquo;re done</li>
<li>2.5 weeks out &ndash; Analyst inquiries for message testing</li>
<li>2.5 weeks out &ndash; Start putting together product demo</li>
<li>2 weeks out &ndash; Start putting together documentation</li>
<li>2 weeks out &ndash; Start nailing down blog post for final messages</li>
<li>1 weeks out &ndash; Start to put final touches on blog post for grammar</li>
<li>1 week out &ndash; Analyst briefings</li>
<li>1 week out &ndash; Update support</li>
<li>3-5 days out &ndash; Stage blog post</li>
<li>3-5 days out &ndash; Stage new documentation</li>
<li>2-4 days out &ndash; Make sure PRs are ready or feature flags, in short the switch is there or live but not public</li>
<li>1-3 days out &ndash; Update sales</li>
<li>1-3 days out &ndash; Interall communication to all@</li>
<li>1-3 days out &ndash; Media briefings</li>
<li>LAUNCH DAY &ndash; Sit in a room and watch all the things, engage with twitter/HN/etc.</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Postgres and Node - Hands on using Postgres as a Document Store with MassiveJS]]></title>
    <link href="http://www.craigkerstiens.com/2015/12/08/massive-json/"/>
    <updated>2015-12-08T00:00:00-08:00</updated>
    <id>http://www.craigkerstiens.com/2015/12/08/massive-json</id>
    <content type="html"><![CDATA[<p>JSONB in Postgres is absolutely awesome, but it&rsquo;s taken a little while for libraries to come around to make it as useful as would be ideal. For those not following along with Postgres lately, here&rsquo;s the quick catchup for it as a NoSQL database.</p>

<ul>
<li>In Postgres 8.3 over 5 years ago Postgres received <a href="http://www.craigkerstiens.com/2013/07/03/hstore-vs-json/">hstore a key/value</a> store directly in Postgres. It&rsquo;s big limitation was it was only for text</li>
<li>In the years after it got GIN and GiST indexes to make queries over hstore extremely fast indexing the entire collection</li>
<li>In Postgres 9.2 we got JSON&hellip; sort of. Really this way only text validation, but allowed us to create some <a href="http://www.craigkerstiens.com/2013/05/29/postgres-indexes-expression-or-functional-indexes/">functional indexes</a> which were still nice.</li>
<li>In Postgres 9.4 we got JSONB &ndash; the B stands for Better according to <a href="http://www.twitter.com/leinweber">@leinweber</a>. Essentially this is a full binary JSON on disk, which can perform as fast as other NoSQL databases using JSON.</li>
</ul>


<!--more-->


<p>This is all great, but when it comes to using JSON you need a library that plays well here. As you might have guessed it from <a href="http://www.craigkerstiens.com/2015/11/30/massive-node-postgres-an-overview-and-intro/">my previous post this is where MassiveJS comes in</a>. Most ORMs take a more legacy approach to <a href="http://www.craigkerstiens.com/2014/01/24/rethinking-limits-on-relational/">how they work with the database</a>, in contrast the other side of the world believes in document only storage way is the future. In contrast Postgres believes there is a time and place for everything, just like Massive, except it believes Postgres is the path <a href="http://www.craigkerstiens.com/2012/04/30/why-postgres/">just as I do</a>.</p>

<p>Alright, enough context, let&rsquo;s take a look.</p>

<h3>Getting all setup</h3>

<p>First go ahead and create a database, let&rsquo;s call it massive, and then let&rsquo;s connect to it and create our example table:</p>

<pre><code>$ createdb massive
$ psql massive
# create table posts (id serial primary key, body jsonb);
</code></pre>

<p>Now that we&rsquo;ve got our database setup let&rsquo;s seed it with some data. If you want you can simple hop over to the github repo and pull it down then run <code>node load_json.js</code> to load the example data. A quick look at it, given an <code>example.json</code> file we&rsquo;re going to iterate over it. For each record in there, we&rsquo;re going to call saveDoc. Based on our table which has a unique id key and a body jsonb field it&rsquo;ll simply save our JSON document into that table:</p>

<pre><code>var parsedJSON = require('./example.json');

for(i = 0; i &lt; parsedJSON.posts.length; i++) {
    db.saveDoc("posts", parsedJSON.posts[1], function(err,res){});
};
</code></pre>

<p><em>If you want to just take a look at this <a href="https://github.com/craigkerstiens/json_node_example">github repo</a>, once you create a database you can run <code>node load_json.js</code> to seed it.</em></p>

<h3>Why JSON at all?</h3>

<p>JSON data is all over the place, in many cases it&rsquo;s fast and flexible and allows you to move more quickly. Yes, much of the time normalizing your data can be useful, but there is something to be said for expediency saving some data and querying across it. Querying across some giant document also used to be much more expensive, but now with JSONB and it&rsquo;s indexes that can be extremely fast.</p>

<h3>Querying</h3>

<p>So how do we go about querying? Well it&rsquo;s pretty simple with Massive, they provide a nice <code>findDoc</code> function to let you just search for contents of a specific key within the document. Let&rsquo;s say I wanted to pull back all posts that are in the Postgres category, well it&rsquo;s as simple as:</p>

<pre><code>db.posts.findDoc({title : 'Postgres'}, function(err,docs){
    console.log(docs);
});
</code></pre>

<p>The real beauty of this is if you added a GIN index (which will index the entire document) this query will be <a href="http://obartunov.livejournal.com/175235.html">quite performant</a>.</p>

<p><em>Just make sure to add your GIN index</em>:</p>

<pre><code>CREATE INDEX idx_posts ON posts USING GIN(body jsonb_path_ops); 
CREATE INDEX idx_posts_search ON posts USING GIN(search);  
</code></pre>

<p>But even better, with Massive it&rsquo;ll automatically add these for you if you just start saving docs. It will automatically create the table and appropriate indexes, just doing the correct thing out of the box.</p>

<h3>Full text and JSON</h3>

<p>Cool, so you can do an exact look up. Which is great when you&rsquo;re matching a category&hellip; which could be easily normalized. It&rsquo;s great when you&rsquo;re matching numbers, which also could likely reside in their own column. But what about when you&rsquo;re searching over a large document, or a set of keys within some document which may require several joins, or indeterminate data structure, well you may want to search for the presence of that string at all. As you may have guessed this is quite trivial.</p>

<pre><code>db.posts.searchDoc({
    keys : ["title", "category"],
    term : ["Postgres"]
}, function(err,docs){
    console.log(docs);
})
</code></pre>

<p>Hopefully it&rsquo;s pretty straight forward, but to be very clear. Call out the document table you want to search, then the keys you&rsquo;ll want to include in the search, then the term. This will search for any place the contents that string are found in matching values for those keys.</p>

<p>Which will nicely yield the expected documents:</p>

<pre><code>[ { link: 'http://www.craigkerstiens.com/2015/05/08/upsert-lands-in-postgres-9.5/',
    title: 'Upsert Lands in PostgreSQL 9.5 – a First Look',
    category: 'Postgres',
    comments: [ [Object] ],
    id: 2 },
  { link: 'http://www.craigkerstiens.com/2015/11/30/massive-node-postgres-an-overview-and-intro/',
    title: 'Node, Postgres, MassiveJS - a Better Database Experience',
    id: 3 } ]
</code></pre>

<h3>In conclusion</h3>

<p>While Massive isn&rsquo;t perfect, its approach to storing queries in files, using the schema vs. having to define your models in code and the database, and it&rsquo;s smooth document integration makes it a real contender as a better database library when working with Node. Give it a try and let me know your thoughts.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Node, Postgres, MassiveJS - A better database experience]]></title>
    <link href="http://www.craigkerstiens.com/2015/11/30/massive-node-postgres-an-overview-and-intro/"/>
    <updated>2015-11-30T00:00:00-08:00</updated>
    <id>http://www.craigkerstiens.com/2015/11/30/massive-node-postgres-an-overview-and-intro</id>
    <content type="html"><![CDATA[<p>First some background–I&rsquo;ve always had a bit of a love hate relationship with ORMs. ORMs are great for basic crud applications, which inevitably happens at some point for an app. The main two problems I have with ORMs is:</p>

<ol>
<li>They treat all databases as equal (yes, this is a little overgeneralized but typically true). They claim to do this for database portability, but in reality an app still can&rsquo;t just up and move from one to another.</li>
<li>They don&rsquo;t handle complex queries well at all. As someone that sees SQL as a very powerful language, taking away all the power just leaves me with pain.</li>
</ol>


<p><em>Of course these aren&rsquo;t the <a href="https://kev.inburke.com/kevin/faster-correct-database-queries/">only issues</a> with them, just the two ones I personally run into over and over.</em></p>

<p>In some playing with Node I was optimistic to explore <a href="http://massive-js.readthedocs.org">Massive.JS</a> as it seems to buck the trend of just imitating all other ORMs. My initial results–it makes me want to do more with Node just for this library. After all the power of a language is the ecosystem of libraries around it, not just the core language. So let&rsquo;s take a quick tour through with a few highlights of what makes it really great.</p>

<!--more-->


<h3>Getting setup</h3>

<p>Without further adieu here&rsquo;s a quick tour around it.</p>

<p>First let&rsquo;s pull down the example database from <a href="http://postgresguide.com/setup/example.html">PostgresGuide</a></p>

<p>Then let&rsquo;s setup out Node app:</p>

<pre><code>$ npm init
$ npm install massive --save
</code></pre>

<h3>Connecting and querying</h3>

<p>Now let&rsquo;s try to connect and say query a user from within our database. Create the following as an <code>index.js</code> file, then run with <code>node index.js</code>:</p>

<pre><code>var massive = require("massive");
var connectionString = "postgres://ckerstiens:@localhost/example";

var db = massive.connectSync({connectionString : connectionString});

db.users.find(1, function(err,res){
  console.log(res);
});
</code></pre>

<p>Upon first run if you&rsquo;re like me and use the <a href="http://postgresguide.com/setup/example.html">PostgresGuide example database</a> (which I now need to go back and tidy up), you&rsquo;ll get the following:</p>

<pre><code>db.users.find(1, function(err,res){
        ^
TypeError: Cannot read property 'find' of undefined
</code></pre>

<p>I can&rsquo;t describe how awesome it is to see this. What&rsquo;s happening is when Massive loads up it&rsquo;s connecting to your database, checking what tables you have. In this case though because we don&rsquo;t have a proper primary key defined it doesn&rsquo;t load them. It could treat id as some magical field of course like Rails used to and ignore the need for an index, but instead it not only encourages a good database design but requires it.</p>

<p>So let&rsquo;s go back and create our index in our database:</p>

<pre><code>$ psql example
$ alter table users add primary key (id);
</code></pre>

<p>Alright now let&rsquo;s run our script again with <code>node index.js</code> and see what we have:</p>

<pre><code>{ id: 1,
  email: 'john.doe@gmail.com',
  created_at: Thu Sep 24 2015 03:42:52 GMT-0700 (PDT),
  deleted_at: null }
</code></pre>

<p>Perfect! Now we&rsquo;re all connected and it even queried our database for us. Now let&rsquo;s take a few more look at some of the operators.</p>

<h3>Running an arbitrary query</h3>

<p><code>db.run</code> will let me run any arbritrary SQL. An example such as <code>db.run("select 'hello'")</code> will produce [ { &lsquo;?column?&rsquo;: &lsquo;hello&rsquo; } ].</p>

<p>This makes it nice and easier for us to break out of the standard ORM model and just run SQL.</p>

<h3>Find for quick look ups</h3>

<p>Similar to so many other database tools <code>find</code> will offer you the most common quick look ups:</p>

<pre><code>$ db.users.find({email: 'jane.doe@gmail.com'}, function(err, res){console.log(res)});
$ db.users.find({'created_at &gt;': '2015-09-24'}, function(err, res){console.log(res)});
</code></pre>

<p>And of course there&rsquo;s a where operator for multiple conditions.</p>

<h3>Structuring queries in your application</h3>

<p>While in the next post I&rsquo;ll dig in deep to JSON, this is perhaps my favorite feature of Massive&hellip; It&rsquo;s design for pulling out queries into individudal SQL files. Simply create a <code>db</code> folder and put your SQL in there. Let&rsquo;s take the most basic example of our user email lookup and put it in <code>user_lookup.sql</code></p>

<pre><code>SELECT *
FROM users
WHERE email = $1
</code></pre>

<p>Now back in our application we can run this and pass in a parameter to it:</p>

<pre><code>db.user_lookup(['jane.doe@gmail.com'], function(err,res){
  console.log(res);
});
</code></pre>

<p>This separation of our queries from our code makes it easier to track them, view diffs, and even more so <a href="http://www.craigkerstiens.com/2012/11/17/how-i-write-sql/">create very readable SQL</a>.</p>

<h3>Up next</h3>

<p>So sure, you can connect to a database, you can query some things. There were a couple of small but more novel things that we blew through in here. First is the fact I didn&rsquo;t have to define all my schema, it just knew it as <a href="http://www.craigkerstiens.com/2014/01/24/rethinking-limits-on-relational/">it really should</a>. The separation of SQL queries you&rsquo;ll custom write into files is simple, but will make for much more maintainable applications over the long term. And best of all is the JSON support, which I&rsquo;ll get to soon&hellip;</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Seeding a sharing-economy or platform company]]></title>
    <link href="http://www.craigkerstiens.com/2015/10/02/seeding-a-sharing-economy-or-platform-company/"/>
    <updated>2015-10-02T00:00:00-07:00</updated>
    <id>http://www.craigkerstiens.com/2015/10/02/seeding-a-sharing-economy-or-platform-company</id>
    <content type="html"><![CDATA[<p>These days if you&rsquo;re creating a company you likely hope to accomplish more with less people, two ways of doing this fall to: The sharing economy and creating a platform. It&rsquo;s easy to see the case for this when you have such <a href="http://graphics.wsj.com/billion-dollar-club/">unicorns</a> like AirBnB or Uber. The opportunity for each of those to compete against hotel chains or taxi services which each need to manage their own inventory is incredibly exciting and revolutionary. In a similar fashion platforms can offer much the same, Heroku&rsquo;s platform and marketplace made it easier than ever for developers to click a button and get everything they needed years ago. It&rsquo;s not just their code, it&rsquo;s everything from <a href="https://www.heroku.com/postgres">Postgres</a> to Mongo to <a href="https://elements.heroku.com/addons#logging">Logging</a>. Or take the app store as example. Smart phones weren&rsquo;t a new thing when the iPhone came out, but it was only the saviest of users that had apps installed on their windows smartphone or blackberry. The app store made the iPhone different than any other phone by allowing others to build and improve it, turning the iPhone not into a phone but a platform.</p>

<!--more-->


<p>Platforms and the sharing economy both let you get further than having to take on the costs of offering the equivilent all on your own. And while a great idea to venture into one of these two areas, starting them isn&rsquo;t as trivial as simply deciding to. For both of these you have issues with having a two sided market, first you have to convince the providers to come along, then the customers or vice versa. As a result of this two sided market issue the easiest way to actually start is by bootstrapping it yourself – or faking it til you make it.</p>

<p>What are some good examples of faking this? I&rsquo;m sure you can probably find some good stories going back about AirBnB or Uber, but let&rsquo;s assume times were different then. Let&rsquo;s take a look at a very recent example: <a href="http://techcrunch.com/2015/08/26/lugg-an-app-for-on-demand-short-distance-moves-raises-3-8-million/">Lugg</a> which just launched in the latest batch of YC. Lugg is Uber for moving essentially, allowing you to on-demand request furniture moved from one place to another. Early on Lugg built their app, then waited for requests to come in, then the founders got in a truck and moved the furniture themselves. As a customer the founders are likely providing a great experience, without ever having to tip their hat at the ways their hacking the impression of being a large well oiled machine.</p>

<p>But what about a platform? Slack continues to grow like wildfire as the new medium for communication. These days there&rsquo;s endless integrations for slack, and I expect they&rsquo;ll continue to expand what a platform for communication looks like. But a year ago they were quite a ways from having people show up at their door to add an integration. Sure there were people using them, but to expect github/trello/asana to immediately build an integration for every new flavor of the week tool would be crazy. Yet, without these integrations slack wouldn&rsquo;t be nearly as useful as it is today–and probably wouldn&rsquo;t have seen the growth it&rsquo;s seen. In the early days of a platform the easiest way to get these integrations and partners in place is to show up and build the work yourself. Slack carried the weight early of building these integrations, much as Heroku add-ons showed up at partners offices and help write the code to get them as a provider in the marketplace. And while both Slack and Heroku are larger companies now, it still holds true for smaller ones starting today. <a href="https://www.blockspring.com/">Blockspring</a>, a company which aims to make web services available through spreadsheets, had to do very much the same thing building their initial integrations themselves. Now with their rapidly growing user base and already large collection of APIs they may be able to shift the model, but early on that wasn&rsquo;t so much an option.</p>

<p>If you want to build a platform, start by creating the impression of one while still carrying the load yourself. Yes, move to a true platform as soon as you can, but don&rsquo;t wait for others to show up before you go that route.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[A guide to analyst relations for startups]]></title>
    <link href="http://www.craigkerstiens.com/2015/07/25/A-guide-to-analyst-relations-for-startups/"/>
    <updated>2015-07-25T00:00:00-07:00</updated>
    <id>http://www.craigkerstiens.com/2015/07/25/A-guide-to-analyst-relations-for-startups</id>
    <content type="html"><![CDATA[<p>When it comes to go to market and marketing there&rsquo;s lots of pieces in a toolchest that all work together. One that comes a bit later, but if used properly (much like a <a href="http://www.craigkerstiens.com/2015/07/21/An-intro-PR-guide-for-startups/">PR agency</a>) can be valuable is industry analysts. And while working with a PR agency can quickly start to become clear. How to work with analysts so it is productive on both sides can take a bit longer to figure out, or at least it did for me. Even before you do start working with them there&rsquo;s the question of if or when should you. Here&rsquo;s hoping this primer makes it a bit faster and easier for others.</p>

<!--more-->


<h3>What is an analyst</h3>

<p><em>Apologies to all analysts, but of all parts of this post I might butcher this one</em></p>

<p>Analysts talk to a lot of companies, both the ones making products as well as the ones purchasing them. I&rsquo;m not actually sure what the spread is I&rsquo;d guess 80-20. A large output of this and other activities is  creating various reports and rankings. Gartner&rsquo;s Magic Quadrant is probably the most well known industry ranking. Much of what they create isn&rsquo;t freely available for consumption so you likely don&rsquo;t see the sheer volume of insights they put out.</p>

<h3>Why would you engage with an analyst</h3>

<p>So what do they do for you? There’s really two major buckets:</p>

<p><strong>Help with sales/marketing</strong> &ndash; Given they&rsquo;re informing and influencing buying decisions of businesses they can be one more person on your side. If a launch in Techcrunch makes business foo aware of product bar, then an analyst report or ranking can help sway a decision on whether to try bar vs. baz.</p>

<p><strong>Consulting</strong> &ndash; The other major opportunity is for the analyst to give some form of guidance. In a larger company when you already have an established product they should absolutely be part of your launch process (more on that in a future post). They&rsquo;re actively following your market and space, hopefully just as you are to some extent. They can offer an outside perspective and help with broad areas of focus and messaging.</p>

<p><em>More</em> &ndash; In reality it’s as clean cut as above. They may be able to introduce you to good candidates for hiring. They may be able to introduce you to a large company interested in acquiring some capability which you have. They may be able to connect you with investors. All of these things can and do happen, but the above buckets typically are the primary drivers.</p>

<h3>When?</h3>

<p>First, engaging with analysts should always come after you have some confidence in the product, after you&rsquo;ve started some marketing drumbeat, and after sales. In short don&rsquo;t be in a huge rush here, you&rsquo;ll get there, but don&rsquo;t be in too big of a rush. As you start to get some attention and momentum it&rsquo;s just as likely they&rsquo;ll engage with you first as you reaching out. Also, marketing != sales, more on that in a future post.</p>

<p>But, let&rsquo;s assume you&rsquo;ve got a product <strong>which targets business</strong> (<em>Analysts aren&rsquo;t just for tech companies, though you’ll see the benefit here sooner if you’re say a database company than a HR product</em>). Let’s also assume you&rsquo;ve got some sales and have some <a href="http://www.craigkerstiens.com/2015/07/21/An-intro-PR-guide-for-startups/">good launches under your belt</a>. As it starts to come up in sales calls if you&rsquo;re in any industry reports or rankings that may be an indicator, if you&rsquo;re hearing about other competitors having more validation in such reports. As a general rule of thumb once you&rsquo;ve got inhouse PR they should be able to help guide and steer to the right time.</p>

<h3>So how do you engage with an analyst</h3>

<p>If you&rsquo;re engaging in some form of report or article, that should start to be pretty self explanatory. They&rsquo;ll send you a questionnaire, you fill it out. You go back and forth a little bit.</p>

<p>However, the majority of my interactions aren&rsquo;t on those articles and reports, for ever one time I fill out lots of questions to help some report or ranking I have 20 calls with an analyst.</p>

<p>There are two primary calls you can have, an inquiry and a briefing.</p>

<h4>Inquiries</h4>

<p>Inquiry is just a fancy word for consulting call. An inquiry you will always be paying for.</p>

<p><em>A small detour here. The regularity and consistency in which you engage with an analyst makes a difference. They&rsquo;re also people at the end of the day, so while firms have certain styles it&rsquo;s even further multiplied by being very people driven. In your interactions you&rsquo;ll have a different rapport with different people, it&rsquo;s at a minimum important to be aware of this.</em></p>

<p>So back to an inquiry. Within an inquiry your goal is to pull back the curtain and give some backstage insights into what you&rsquo;re doing and where you&rsquo;re headed. This is typically under NDA and trust the NDA of an analyst. It&rsquo;s worthwhile to be as candid as you can here, yes it feels weird, but you&rsquo;ll get the most value. They&rsquo;re not like that of a reporter looking for a scoop (not that you can&rsquo;t trust reporters, just know if you say it, it&rsquo;s on record). You don&rsquo;t have to relish the entire call to one area, but areas of coverage are often:</p>

<ul>
<li>Upcoming products and major releases you’re working on</li>
<li>Broader strategy and roadmap</li>
<li>Get input on what they&rsquo;re seeing and hearing from customers</li>
</ul>


<h4>Briefings</h4>

<p>The other type of call we have is a briefing. This is a little similar to that of a press briefing. You&rsquo;ll get on the call, and walk through some upcoming launch or just give an update on your company and progress. The latter is more common if they&rsquo;re unfamiliar with you or your product.</p>

<p>Analyst briefings are good to do earlier than your press briefings, compared to press they&rsquo;re like a bike with training wheels. It&rsquo;s best if you still maintain your balance–the ride will be smoother, but there&rsquo;s a little less risk of completely toppling over. One key difference is you often have a powerpoint deck you get to walk through during an analyst briefing. I&rsquo;ve found this is helpful for pacing and key messages, I used to be skeptical, but now very much feel it&rsquo;s always worth doing.</p>

<p><em>Pro-tip: You can create a deck and use it for press too, no they won&rsquo;t want to get on a gotomeeting, but you can send it over so they have more content later. BUT, more importantly you can also walk through it on your own screen if it helps with pacing.</em></p>

<p>Within a briefing you&rsquo;ll have some ability to ask them questions at points. Does this resonate? Are you hearing similar? What are you seeing in the market? Don&rsquo;t turn it into an inquiry, but knowing the parts that hit home for them allow you to refine your pitch for the next call.</p>

<h4>Engaging &ndash; the tactical parts</h4>

<p>&ldquo;Analysts are pretty much paid to talk and write&rdquo; &ndash; <a href="http://www.twitter.com/cote">@cote</a>. So expect that often when you occupy their time there&rsquo;s a price to it. In terms of finding them it should be pretty easy, to know the list of ones in your space, you may see them quoted or reference in various media outlets. You may just naturally crop up in a report.</p>

<p>If you create a regular relationship with them you&rsquo;ll have some contract of hours over the course of a quarter or year. At an early stage company this is often owned and manage by whomever runs your PR from an internal perspective.</p>

<h3>Conclusion</h3>

<p>If you&rsquo;re about to engage with analysts for the first time or haven’t figured out how to get the most out of your interactions I hope the broad overview is helpful. If there&rsquo;s some glaring parts you feel I&rsquo;ve missed let me know <a href="http://www.twitter.com/craigkerstiens">@craigkerstiens</a>. And for further reading/watching I’d encourage checking out the great talk from <a href="http://www.twitter.com/cote">@cote</a> in the <a href="http://www.heavybit.com/library/video/2014-01-21-michael-cote">Heavybit library</a>.</p>

<p>As far as take-aways and a recap:</p>

<ol>
<li>Don&rsquo;t be too eager to jump in with analysts. They can absolutely provide value, but you have to put some time in before it really starts to pay off. It&rsquo;s not an overnight change and takes building a rapport with them.</li>
<li>At the same time, analysts can be useful in many B2B areas not just tech ones.</li>
<li>When in an inquiry be open and as transparent as possible.</li>
<li>Powerpoint/Keynote/Google presentations are useful in briefings, even if it&rsquo;s just for you to follow along.</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[A guide to PR for startups]]></title>
    <link href="http://www.craigkerstiens.com/2015/07/21/An-intro-PR-guide-for-startups/"/>
    <updated>2015-07-21T00:00:00-07:00</updated>
    <id>http://www.craigkerstiens.com/2015/07/21/An-intro-PR-guide-for-startups</id>
    <content type="html"><![CDATA[<p>You&rsquo;ve built your product and you&rsquo;re now ready for your first major launch. Or you&rsquo;ve been through a launch or two, but are looking to scale the process as you&rsquo;re doing more launches and announcements. You really have two options: do it <a href="http://jasonlbaptiste.com/featured-articles/how-i-pitched-techcrunch-and-13-ways-to-get-press-when-you-launch-your-startup/">all on your own</a>, or work with a PR agency. One frequent crossroad is that you&rsquo;re not at the point of a full time PR person, but unsure what a PR agency can offer you; and, further what&rsquo;s the best way to work with them so you&rsquo;re getting the maximum value.</p>

<p>As I&rsquo;ve talked to more startups lately, it&rsquo;s become clear that effectively working with PR teams and the media is mostly learned by doing. Because there&rsquo;s not much guidance out there, here&rsquo;s an attempt at some basic guidelines.</p>

<!--more-->


<h3>On PR</h3>

<p>First there&rsquo;s two types here and they&rsquo;re not mutually exclusive. In-house PR is a full time person or team that works within your company, here you&rsquo;ll often have a pretty different experience. From my experience, in-house PR people tend to understand a company message and vision because they are living and breathing your company values every day.</p>

<p>The other alternative is hiring a PR agency. An agency will have several (sometimes hundreds!) of clients. The relationship that you’ll have with an agency is much different than in-house. You&rsquo;ll use them just like you would a consultant or contractor. Most startups end up with the agency approach first, because of the perception of “more people working for a cheaper cost than hiring in-house.” However, it&rsquo;s of note an agency doesn&rsquo;t alleviate you of doing work, nor should you want them to handle all parts of it.</p>

<h4>Messaging</h4>

<p>An agency may offer to help with messaging, but take this somewhat lightly. I don&rsquo;t doubt that some are very good at it, but in most cases I&rsquo;ve found they don&rsquo;t have the same amount of customer interaction as you as a founder or early employee would. Further, your vision of impact to the market and direction may be more distant than theirs. You should expect to own your messaging, just like you own your product.</p>

<p>Where they can heavily help is providing a lot of structured frameworks for helping you get to your messaging. Some pretty basic templates of standard questions for customers and partners can go along way in helping you actually uncover what they feel your value is.</p>

<p><em>On your key messaging/value prop, there&rsquo;s two pieces I&rsquo;ll drop in here. While I&rsquo;d love to write another long post on it, I wonder when I&rsquo;ll actually get it out. So the first is pitch the problem you&rsquo;re trying to solve–<a href="http://500hats.typepad.com/500blogs/2009/08/your-solution-is-not-my-problem.html">Dave McClure</a> talks about this as well as anyone. The second is don&rsquo;t pitch features, pitch the use cases and solutions. Pitch what&rsquo;s possible</em></p>

<h4>Pitching</h4>

<p>This is the number one area I&rsquo;ve found that having PR makes a huge difference. In the world of reporting, different reporters have different beats (areas of coverage), styles, outreach preferences, and most importantly, different relationships with companies and people. Knowing <em>all</em> of this and how to pitch a story to them is key. Yes you can spend hours researching and creating a perfect story just for them, and do that again, and again and hopefully land some coverage. But I&rsquo;d argue a bit: that&rsquo;s not the best use of your time.</p>

<p>With a good PR person or agency you&rsquo;ll be able to strike a mix of:</p>

<ul>
<li>Here&rsquo;s the outlets I want to be in and why (have a good reason for why).</li>
<li>Understanding the audience and readership.</li>
<li>What outlets you feel like your key customers are reading, and validate this with the agency.</li>
</ul>


<p>From there, if you&rsquo;ve found a good agency they already have relationships with your key journalists / publications. So if you have a compelling product, you just need to give them the right messaging of the particular launch or news.</p>

<h4>What else to expect from your agency</h4>

<p>A surprise for some is how the whole process works. The agency is going to be there on the phone with you. You&rsquo;re not going to hang out over beers while pitching being chummy. The reporter is listening to multiple other pitches, it&rsquo;s likely they had one right before you and right after. The agency is there listening, helping keep time and track of conversation for reporter fact-checking after the interview.</p>

<p>Hopefully they&rsquo;re also keeping notes. They should be able to provide you with some high level notes of what message resonated with each reporter and what didn&rsquo;t, what you covered, and what they asked. This is especially useful for future interactions.</p>

<p>Similarly you should get a briefing 1 pager ahead of time. You should be able to skim this, you don&rsquo;t have to memorize. But it&rsquo;ll include key things about recent articles written by the reporter, their beat, topics to dive into and ones to stay away from. If you can connect the dots, those notes from an initial call start to feed into the 1 pagers for future calls.</p>

<h3>Onto the briefing</h3>

<p>Of course it&rsquo;s important to land the briefing in the first place, but just as important is getting it right. Coming into it, the reporter will have already gotten the high level pitch&hellip; It&rsquo;s why they took the call. You&rsquo;ll get a mixed bag of those that are open to teeing up the opportunity to those that want to get right to the news. Roll with what they prefer, but also don&rsquo;t be afraid of trying to hit some of your key points.</p>

<h4>Have your key messages ready</h4>

<p>Sound bites help hugely here. Analogies, customer references, whatever you want to hit. Have it ready. Also if you&rsquo;ve got a great sound bite that helps tell the story, it can make the reporter&rsquo;s job easier. Just don&rsquo;t swing too far into happy go lucky marketing land. It’s important to remember that you’re talking to a person. Have a conversation &ndash; don’t talk at them.</p>

<h4>Go slow</h4>

<p>It may seem obvious when you think about it, but as you&rsquo;re talking the reporter is writing. Or at least you hope they are. Some do it by hand and type up notes late, some type right then and there. When you hear a pause it doesn&rsquo;t always mean to keep going and it seldom means hurry up. Become extra comfortable with pauses. Check in if you&rsquo;re going to fast, if they&rsquo;re following, if they have any questions. I&rsquo;ve had people bring me in a beer before because I&rsquo;d had multiple cups of coffee through a few pitches, and they were trying to slow me down a bit. Know your pace, and then slow it down.</p>

<h4>Questions</h4>

<p>It&rsquo;s okay if they don&rsquo;t have a lot of questions, they may not. They may have none at all. Yes, pause, and give them a chance, or even ask if they have any. But don&rsquo;t stress too much if they have no questions.</p>

<p>On the flip side of that &ndash; you’re PR person should have prepared a list of questions for you beforehand that the reporter could possibly throw your way. Be sure you’ve thought through and practiced all the Q&amp;A scenarios before the interview so you aren’t caught off-guard when you’re in front of the reporter.</p>

<h3>In conclusion</h3>

<p>If it&rsquo;s your first go around, don&rsquo;t stress too much. Have the headlines you want in your mind and key messages, or better yet write them out. <em>Personally I write key things on a whiteboard nice and large before I&rsquo;m on the call</em>. Finally once you&rsquo;re all done, enjoy reading the coverage. <strong>But you&rsquo;re not all done</strong> after you get some coverage look back, run a retrospective just like you would for a software project. What worked well, why did or didn&rsquo;t something work. What can you improve next time.</p>

<p>*Full disclosure, this is based across interactions with a small sample size of different PR agencies and individuals. Mileage may differ heavily from PR firm to PR firm, but hopefully the above provides at least some roadmap for more clarity vs. flying blind. As always if you&rsquo;ve got feedback/questions, feel free to let me know <a href="http://www.twitter.com/craigkerstiens">@craigkerstiens</a></p>

<p><em>Finally a special thanks to <a href="http://www.twitter.com/pavtalk">Paul Katsen</a> for much of the inspiration on creating this post and to he and <a href="http://www.twitter.com">Katie Boysen</a> for review</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Moving past averages in SQL (Postgres) – Percentiles]]></title>
    <link href="http://www.craigkerstiens.com/2015/06/07/Moving-past-averages-in-sql/"/>
    <updated>2015-06-07T00:00:00-07:00</updated>
    <id>http://www.craigkerstiens.com/2015/06/07/Moving-past-averages-in-sql</id>
    <content type="html"><![CDATA[<p>Often when you&rsquo;re tracking a metric for the first time you take a look at your average. For example what is your ARPU &ndash; Average Revenue Per User. In theory this tells you if you can acquire new user how much you&rsquo;ll make off that user. Or maybe what&rsquo;s your average life time value of a customer. Yet, many that are more familiar looking and extracting meaning from data median or a few different looks at <a href="http://apmblog.dynatrace.com/2012/11/14/why-averages-suck-and-percentiles-are-great/">percentiles can be much more meaningful</a>.</p>

<!--more-->


<p>And while you can very easily get the <code>AVG</code> in Postgres, with a small amount more effort you can report on percentiles as well. Window functions have been around for some time in Postgres. They allow you to order your result set over a certain group. The most basic example is if you want to order by date, but know which one falls at place 10 in order you can use a window function and project out the <code>rank()</code>.</p>

<p>Beyond outputting the rank yourself and doing extra manipulation Postgres has some great utilities to make the most common uses even easier. Being able to compute things such as the perc 95 directly on the data, or lay out for every record in the result where it falls within a percentile is hugely useful. Let&rsquo;s take a look:</p>

<p>Assuming you have a table called purchases, which has a total in it we could try:</p>

<pre><code>SELECT id,
       total,
       ntile(100) OVER (ORDER BY total) AS perc_rank
FROM purchases
</code></pre>

<p>This would give us something like:</p>

<pre><code>    id    |  total  | perc_rank
----------|---------|-----------
   264    |  12034  |    100
   643    |  11830  |    100
...
...
   304    |   751   |     95
</code></pre>

<p>What this would tell us is we have less than 5% of our purchases that have a total over 751. From here you can start to dig in and extract all sorts of different meanings, and by doing directly in SQL you&rsquo;re closer to the data and have one less processing step.</p>

<p>Percentiles get even more fun with the ordered set functions that came out in <a href="http://www.craigkerstiens.com/2014/02/02/Examining-PostgreSQL-9.4/">Postgres 9.4</a>. They even allow you to project out hypothetical values in certain cases. For now I&rsquo;d encourage adding ntile to your toolbox anytime you&rsquo;re analyzing average or medians it will make your world a bit better, and then consider exploring further on the <a href="http://www.postgresql.org/docs/9.4/static/functions-aggregate.html#FUNCTIONS-ORDEREDSET-TABLE">ordered set functions</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Upsert lands in PostgreSQL 9.5 – A first look]]></title>
    <link href="http://www.craigkerstiens.com/2015/05/08/upsert-lands-in-postgres-9.5/"/>
    <updated>2015-05-08T00:00:00-07:00</updated>
    <id>http://www.craigkerstiens.com/2015/05/08/upsert-lands-in-postgres-9.5</id>
    <content type="html"><![CDATA[<p>If you’ve followed anything I’ve <a href="http://www.craigkerstiens.com/2012/04/30/why-postgres/">written about Postgres</a>, you know that I’m a fan. At the same time you know that there’s been one feature that so many other databases have, which Postgres lacks and it <a href="http://www.craigkerstiens.com/2014/08/15/my-postgres-wishlist-for-9.5/">causes a huge amount of angst for not being in Postgres</a>… Upsert. Well the day has come, it’s finally committed and will be available <a href="http://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=168d5805e4c08bed7b95d351bf097cff7c07dd65">in Postgres 9.5</a>.</p>

<p>Sure we’re still several months away from Postgres 9.5 being released, anywhere from 3-6 months as a best guess. That doesn’t mean we can’t take a first look at this feature. Though before we get into it a few special call outs of thanks to Peter Geoghegan of the <a href="http://www.heroku.com/postgres">Heroku Postgres</a> team for being the primary author on it, Andres Freund who recently just joined <a href="https://www.citusdata.com">Citus Data</a> for his heavy contributions, and Heikki Linnakangas as well for his contributions.</p>

<!-- more -->


<p>And now onto the exploration. Upsert is the common name, but if you’re unfamiliar upsert is essentially create or update – Create this new record, but if a conflict exists update it. Let’s take a practical example.</p>

<p>Assume you have a web scraper that imports product information into a table. Each product has a UPC code, title, description, and link. There’s a unique constraint on the UPC code. Now, if your web scraper tries to insert a new product, and a product with the same UPC already exists, you’d usually get an error. But you don’t want the query to fail, you’d want to update the existing product instead. Maybe with a new image, maybe a new description, whatever have you, but I don’t want it to blow up… I simply want to capture the new data and save it.</p>

<p><strong>So before</strong>: Insert a record… Exception this violates a unique constraint… Let your app figure out what to do. <em>protip: often applications would try to work around this, but you can run a chance of a race condition and duplicate records if there’s a conflict. TLDR; it’s not a perfect solution.</em></p>

<p><strong>Now</strong>: Insert a record… There’s a unique constraint violation… Okay, let’s just update all the new record’s fields <strong>inside a single transaction</strong></p>

<p>So enough explanation, here’s how it actually looks in the syntax:</p>

<pre><code>INSERT INTO products (
    upc, 
    title, 
    description, 
    link) 
VALUES (
    123456789, 
    ‘Figment #1 of 5’, 
    ‘THE NEXT DISNEY ADVENTURE IS HERE - STARRING ONE OF DISNEY'S MOST POPULAR CHARACTERS! ’, 
    ‘http://www.amazon.com/dp/B00KGJVRNE?tag=mypred-20’
    )
ON CONFLICT DO UPDATE SET description=excluded.description;
</code></pre>

<p>It’s been a long time coming for this, and it makes building applications that need this kind of behavior even easier. While it would have been great for this to be available years ago, kudos to Postgres and its community for taking the approach that is safe for your data. The result we have now both provides the desired behavior of create or update, <strong>and</strong> is performant without the risk of race conditions for your data.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[A product management blueprint]]></title>
    <link href="http://www.craigkerstiens.com/2015/02/18/a-pm-blueprint/"/>
    <updated>2015-02-18T00:00:00-08:00</updated>
    <id>http://www.craigkerstiens.com/2015/02/18/a-pm-blueprint</id>
    <content type="html"><![CDATA[<p>I find myself having more conversations with startups – both small and large – about product management. I&rsquo;ve blogged about some of <a href="http://www.craigkerstiens.com/2013/03/13/planning-and-prioritizing/">the tools</a> in my chest here but I haven&rsquo;t talked much about my “blueprint” for product management, which I find myself laying out in many conversations over coffee. What follows is this process I’ve used a few times over with new teams to get product and engineering moving together, shipping in a predictable manner, and tackling bigger and more strategic projects.</p>

<!--more-->


<h3>Trust</h3>

<p>I need to know how to work with my team, what their working styles are, and how we interact. This starts by simply interacting – specifically, outside of the office. I heard a similar opinion recently from Chris Fry (who ran engineering at Salesforce and Twitter) when he remarked something to the effect of: “you can tell a good PM from a bad one based on if he goes to drinks with his team.” Without getting hung up on whether it’s beers or coffee, it’s more about socialization with your team and time outside the office. My personal approach: expect a dinner invite over to my place when I take on running product for a new team.</p>

<h3>Velocity</h3>

<p>Once you&rsquo;ve started to build some rapport, it&rsquo;s time to get down to business. If being able to quickly commit and ship something isn’t a problem for you, then it’s easy to just assume this is working. In reality most teams I encounter that need PM support don’t have shipping nailed down. You probably already know if you fall into that category of feeling like you can commit and ship vs. not, so if you’re not able to do that a few tips:</p>

<ul>
<li>There’s some projects that everyone wants to ship that’s been tried over and over, <strong>don’t tackle that first</strong>.</li>
<li>Shipping something is better than nothing. It doesn&rsquo;t have to be the right thing.</li>
<li>Sometimes you don&rsquo;t have to ship something to get velocity, you can launch things you already have</li>
<li><del>Kill scope</del> Test things earlier and more iteratively, the more you can validate or try something without requiring a large investment the more everyone feels better about the direction you’re heading.</li>
</ul>


<p>The key here is to commit to projects, deliver, and move on. Your velocity depends solely on delivery, not tasks, not sprints, not projects, etc.  If you haven’t shipped anything in a year, then your velocity for the year is zero. At a later point you should move from the focus on shipping anything to shipping the right things, it’s more important to ship 1 thing that moves the needle than 10 that don’t, but that’s a later concern.</p>

<h3>Killing things</h3>

<p>On the note of killing scope&hellip; I&rsquo;ve heard it articulated at times, that some engineers are happy when certain PMs show up because it means less work for them. When you go over to an engineer’s desk are you creating more or less work? The answer should be less some large percentage of the time. If you can find a way to accomplish your goals with less effort, it&rsquo;s always a win. Every project everywhere always needs more time or money, what’s more innovative is how you can help a project to ship without one of those two.</p>

<p>At a broader perspective than just scope – one of the biggest ways product can help engineering is by pushing harder for killing off features and the scope of a product. There&rsquo;s a good test on if something is ready to ship: if you <a href="http://www.craigkerstiens.com/2014/08/13/when-to-ship-when-to-kill/">tell beta users you&rsquo;re killing it</a> and they yell at you that you shouldn’t kill it, then it’s ready to ship.</p>

<p>If you’ve already shipped things, but they’re not delivering value or not being used, kill them. It’s that simple, it may have been a great idea at the time, but either invest in making sure it’s used or kill it so you don’t have to maintain it.</p>

<h3>Roadmap planning</h3>

<p>Usually getting velocity and killing things takes 3-6 months to really take full effect. At this point a team feels like they&rsquo;re not under a pile of technical debt, and they can commit to shipping projects. This is the point when product and engineering are melding and you can really start to have fun about where you&rsquo;re headed. At this point I&rsquo;ve seen a huge mix of where engineers are more actively or less actively engaged in this process. And the reality is this is everyone’s job to be thinking about where you&rsquo;re headed as a company – at least that&rsquo;s the case for any company that classifies itself as a startup.</p>

<p>My favorite tool for this is a team gridding exercise, you can read more about this <a href="http://www.craigkerstiens.com/2013/03/13/planning-and-prioritizing/">here</a> and <a href="http://www.craigkerstiens.com/2013/08/13/rule-of-thirds/">here</a>. This is often best conducted at an off-site where you have an opportunity for casual conversation which can foster broader thinking beyond the obvious bug fixes or smaller product improvements.</p>

<p><em>One item of note I&rsquo;ve heard from teams that have done this or similar exercises is they still have trouble deciding what to do after the fact. The role of product is to get to that decision. The most important part is getting to a decision and not the perfect one, gather data, decide, revisit as you go along. All of this isn’t to say that it’s an arbitrary decision, customers, data all inform that as well as the effort to impact matrix exercise, but in the end a clear direction isn’t executed on consensus.</em></p>

<h3>In conclusion</h3>

<p>There’s really no end or done when it comes to the role and the work.</p>

<p>There’s always another milestone and the market is always moving around you. But once you’re able to execute predictably and think in an ordered sense about your roadmap, you’re in a position to be able to monitor and adapt to the market, and even more so experiment and shape the market yourself. At that point you have to keep doing it and then the hard part becomes finding ways of keeping a fresh perspective <em>protip: customers are an important part of that equation</em></p>

<p>Have tips/tricks/practices that I completely missed here or that you disagree with? I’m always happy to talk with others so drop me a note <a href="mailto:craig.kerstiens@gmail.com">craig.kerstiens@gmail.com</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[A simple guide for DB migrations]]></title>
    <link href="http://www.craigkerstiens.com/2014/10/01/a-simple-guide-for-db-migrations/"/>
    <updated>2014-10-01T00:00:00-07:00</updated>
    <id>http://www.craigkerstiens.com/2014/10/01/a-simple-guide-for-db-migrations</id>
    <content type="html"><![CDATA[<p>Most web applications will add/remove columns over time. This is extremely common early on and even mature applications will continue modifying their schemas with new columns. An all too common pitfall when adding new columns is setting a not null constraint in Postgres.</p>

<!--more-->


<h3>Not null constraints</h3>

<p>What happens when you have a not null constraint on a table is it will re-write the entire table. Under the cover Postgres is really just an append only log. So when you update or delete data it&rsquo;s really just writing new data. This means when you add a column with a new value it has to write a new record. If you do this requiring columns to not be null then you&rsquo;re re-writing your entire table.</p>

<p>Where this becomes problematic for larger applications is it will hold a lock preventing you from writing new data during this time.</p>

<h3>A better way</h3>

<p>Of course you may want to not allow nulls and you may want to set a default value, the problem simply comes when you try to do this all at once. The safest approach at least in terms of uptime for your table &ndash;> data &ndash;> application is to break apart these steps.</p>

<ol>
<li>Start by simply adding the column with allowing nulls but setting a default value</li>
<li>Run a background job that will go and retroactively update the new column to your default value</li>
<li>Add your not null constraint.</li>
</ol>


<p>Yes it&rsquo;s a few extra steps, but I can say from having walked through this with a number of developers and their apps it makes for a much smoother process for making changes to your apps.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[My wishlist for Postgres 9.5]]></title>
    <link href="http://www.craigkerstiens.com/2014/08/15/my-postgres-wishlist-for-9.5/"/>
    <updated>2014-08-15T00:00:00-07:00</updated>
    <id>http://www.craigkerstiens.com/2014/08/15/my-postgres-wishlist-for-9.5</id>
    <content type="html"><![CDATA[<p>As I followed along with the <a href="http://www.craigkerstiens.com/2014/03/24/Postgres-9.4-Looking-up/">9.4 release</a> of Postgres I had a few posts of things that I was excited about, some things that missed, and a bit of a wrap-up. I thought this year (year in the sense of PG releases) I&rsquo;d jump the gun and lay out areas I&rsquo;d love to see addressed in PostgreSQL 9.5. And here it goes:</p>

<!--more-->


<h3>Upsert</h3>

<p>Merge/Upsert/Insert or Update whatever you want to call it this is still a huge wart that it doesn&rsquo;t exist. There&rsquo;s been a few implementations show up on mailing lists, and to the best of my understanding there&rsquo;s been debate on if it&rsquo;s performant enough or that some people would prefer another implementation or I don&rsquo;t know what other excuse. The short is this really needs to happen, until that time you can always <a href="http://stackoverflow.com/questions/1109061/insert-on-duplicate-update-in-postgresql/8702291#8702291">implement it with a CTE</a> which can have a race condition.</p>

<h3>Foreign Data Wrappers</h3>

<p>There&rsquo;s so much opportunity here, and this has easily been my <a href="http://www.craigkerstiens.com/2013/08/05/a-look-at-FDWs/">favorite feature of the past 2-3 years in Postgres</a>. Really any improvement is good here, but a hit list of a few valuable things:</p>

<ul>
<li>Pushdown of conditions</li>
<li>Ability to accept a DSN to a utility function to create foreign user and tables.</li>
<li>Better security around creds of foreign tables</li>
<li>More out of the box FDWs</li>
</ul>


<h3>Stats/Analytics</h3>

<p>Today there&rsquo;s <a href="http://madlib.net/">madlib</a> for machine learning, and 9.4 got support for <a href="http://www.depesz.com/2014/01/11/waiting-for-9-4-support-ordered-set-within-group-aggregates/">ordered set aggregates</a>, but even still Postgres needs to keep moving forward here. PL-R and PL-Python can help a good bit as well, but having more out of the <a href="http://www.postgresql.org/docs/9.3/static/functions-aggregate.html">box functions</a> for stats can continue to keep it at the front of the pack for a database that&rsquo;s not only safe for your data, but powerful to do analysis with.</p>

<h3>Multi-master</h3>

<p>This is definitely more of a dream than not. Full multi-master replication would be amazing, and it&rsquo;s getting closer to possible. The sad truth is even once it lands it will probably require a year of maturing, so even more reason for it to hopefully hit in 9.5</p>

<h3>Logical Replication</h3>

<p>The foundation made it in for 9.4 which is huge. This means we&rsquo;ll probably see a good working out of the box logical replication in 9.5. For those less familiar this means the replication is SQL based vs. the binary WAL stream. This means things like using replication to upgrade across versions is possible. So not quite 0 downtime, but ~ a minute or two to upgrade versions. Even of large DBs.</p>

<h3>An official GUI</h3>

<p>Alright this one is probably a pipe dream. And to kick it off, no pgAdmin doesn&rsquo;t cut it. A good end user tool for connecting/querying would be huge. Fortunately the ecosystem is improving here with <a href="http://www.jackdb.com">JackDB</a> (web based) and <a href="https://eggerapps.at/pgcommander/">PG Commander</a> (mac app), but these still aren&rsquo;t discoverable enough for most users.</p>

<h3>What do you want?</h3>

<p>So there&rsquo;s my wishlist, what&rsquo;s yours for 9.5? Let me know &ndash; <a href="http://www.twitter.com/craigkerstiens">@craigkerstiens</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[When to ship it, when to kill it]]></title>
    <link href="http://www.craigkerstiens.com/2014/08/13/when-to-ship-when-to-kill/"/>
    <updated>2014-08-13T00:00:00-07:00</updated>
    <id>http://www.craigkerstiens.com/2014/08/13/when-to-ship-when-to-kill</id>
    <content type="html"><![CDATA[<p>A few weeks ago at lunch I had the opportunity to catch up with a company in the current YC batch, building something very similar to dataclips. While we talked about a lot of things from what we&rsquo;ve learned from dataclips, marketing, and other areas. One area we talked about was product and when to ship vs. when to kill things and I realized I hadn&rsquo;t talked on my fairly simple but clear view on this publicly, so here it is.</p>

<p><em>A large credit to <a href="http://www.twitter.com/hirodusk">Adam Wiggins</a> for giving this model early on in Heroku and his approach to shipping product.</em></p>

<!--more-->


<h3>A precursor to shipping</h3>

<p>First a little background on shipping, in shipping something I&rsquo;m going to assume you have some process of alpha/beta testing with users. This is actually fairly key, if you&rsquo;re not testing it with users then well the rest of this is all moot. Alpha and beta testing is pretty simple, you need some early users. These can be friends, people within a network, or random users you select from. There&rsquo;s different value to how you select these but that&rsquo;s a topic for another time and place.</p>

<h3>On to shipping</h3>

<p>So how do you know it&rsquo;s ready. The basic idea is super simple. Give it to some users in alpha/beta testing. Or start to roll it out following a one &ndash;> some &ndash;> many all principle (maybe to 5% or 10% of your userbase). Then take that brand new feature away.</p>

<p>There&rsquo;s a couple of ways to do this as far as mechanics. If you&rsquo;re in contact with users such as alpha/beta users that you were higher touch with just email them. Tell them you&rsquo;re removing the feature, or if you want to approach it more softly ask them how much they&rsquo;d miss it if it were gone tomorrow. If you&rsquo;re rolling it out more broadly perhaps behind a feature flag, flip it off and watch for feedback.</p>

<p><em>Once you take the feature away or threaten to if you don&rsquo;t have users with pitchforks almost immediately then it&rsquo;s not ready to ship</em>.</p>

<p>Go back to the drawing board and work more on it or simply kill it. As <a href="http://www.twitter.com/james_heroku">@james_heroku</a> would say: &ldquo;So you&rsquo;re saying the reason to ship the shitty thing now is becase you&rsquo;ve spent a lot of time on it?&rdquo;. Stepping back it&rsquo;s all logical, but all too often it&rsquo;s not put in practice when shipping it.</p>

<h3>Your metrics can lie</h3>

<p>Relying on just seeing a user spend some time on the new feature can often be misleading vs. the above approach. There&rsquo;s a great talk by Des Traynor over at <a href="http://insideintercom.io/talk-product-strategy-saying/">intercom.io</a> that hits on this in part, the basic premise in there is that users shifting time from feature X to Y doesn&rsquo;t mean it was a success it just means they&rsquo;re spending time on something different. In launching new things you want to increase the overall value of your product, not simply shift users focus to the new flavor of the week.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Scaling Organizations - Scribing]]></title>
    <link href="http://www.craigkerstiens.com/2014/07/14/on-scribing/"/>
    <updated>2014-07-14T00:00:00-07:00</updated>
    <id>http://www.craigkerstiens.com/2014/07/14/on-scribing</id>
    <content type="html"><![CDATA[<p>In the process of growing a company there&rsquo;s several hurdles based on the size of the company. What worked at 5 doesn&rsquo;t work at 20, what works at 20 doesn&rsquo;t work at 50, and what worked at 50 doesn&rsquo;t work at 150. There&rsquo;s a lot of talk about <a href="http://lifehacker.com/5965280/follow-jeff-bezos-two-pizza-rule-to-avoid-the-dangers-of-groupthink">two pizza teams</a> and <a href="http://adam.herokuapp.com/past/2011/4/28/scaling_a_development_team/">scaling development teams</a> out there. One thing I haven&rsquo;t seen quite enough of is details around scribing and documenting things.</p>

<!--more-->


<h3>Planning</h3>

<p>At teams of 2 and 3 you get everyone in a room. Perhaps 1 person says what you&rsquo;re going to do and you all rally around it, or maybe it&rsquo;s a day of debate and persuasion from all sides.</p>

<p>In the end though you all leave, get heads down, but all know what goal you&rsquo;re working towards. At a larger company planning doesn&rsquo;t scale quite this way. I&rsquo;ve seen roadmapping and planning done a variety of ways as companies scale, but most times the thing they miss for far too long is documenting what comes out of it. Many may produce some level of artifact, but a cohesive wrap-up is often missed. Such an artifact should be easily digestible within a couple minutes, but also deep enough to answer many of the initial questions raised by the high level pieces.</p>

<h3>Meetings</h3>

<p>Meetings are a smaller level item than broader planning, and tend to go without thorough note taking than higher level planning. With growth you&rsquo;ll have more meetings, trust me you will. The more meetings you have the more likely you may miss one or two you&rsquo;re interested in. Or perhaps its as simple as some team members being out. Summer is especially hard around this. For a team of 10 it&rsquo;s not uncommon that you may go all summer with at least 1 person not in the meeting and often two.</p>

<p>Keeping those that miss the meeting well informed of what happened at it is critical as you scale. This is slightly less important at an extremely large company, though still valuable, but critical <em>as you scale to larger</em>. As you&rsquo;re scaling things are changing faster, and context can more easily get lost.</p>

<p>So how do you improve this?</p>

<p>Some practical tips:</p>

<ul>
<li>Have a set of running notes with someone consistently scribing is a great standard to set. <em>If you missed a meeting you know where to go for it.</em></li>
<li>Recording who was and was not at the meeting can be incredibly valuable. I&rsquo;ve heard statements &ldquo;I said X at Y meeting&rdquo;, the only problem with that statement is I wasn&rsquo;t at Y meeting.</li>
<li>Not only recording the meeting notes, but explicitly calling out who&rsquo;s not there can help to know if that information should be explicitly passed along vs. just missed.</li>
<li>Within your long running document have a summary to wrap it up. While scribing is great it can lead to not seeing the forest for the trees at times.</li>
</ul>


<p>And a few from others:</p>

<ul>
<li>Meetings need a <strong>purpose</strong> and an <strong>agenda</strong>. If I don&rsquo;t know why I&rsquo;m having a meeting, or what will be covered, I won&rsquo;t go. If I&rsquo;m organizing a meeting and can&rsquo;t spare the time to produce an agenda and goal, I shouldn&rsquo;t waste other people&rsquo;s time with the meeting – <a href="http://www.twitter.com/jacobian">@jacobian</a></li>
<li>Any meeting over about 15-20 isn&rsquo;t a meeting, it&rsquo;s a presentation (which is OK too but make it clear that it&rsquo;s a download, not a discussion). – <a href="http://www.twitter.com/jacobian">@jacobian</a></li>
</ul>


<h3>Email</h3>

<p>If you aren&rsquo;t aware I&rsquo;m a <a href="http://www.craigkerstiens.com/2014/02/07/my-email-hacks/">big fan of email</a>. Email is almost guaranteed that someone will at least open it (at least if its to them or a clear enough list). If you have something you want someone to read – email it. You can have a canonical wiki, or Trello board, or a variety of tools, but email will get more eyeballs than any of these. At the same time don&rsquo;t email things that are already documented elsewhere.</p>

<p>Emails are great for highlighting the things people absolutely need to know about. Short and concise emails will also help to improve reach. Be careful to make these emails have a high ratio of information size to value. If you have a lot of extra follow on content send them somewhere else to read.</p>

<p>Finally don’t overuse email. If you’re sending the same thing every week people will become numb to this. <a href="http://www.yesware.com">Monitoring if your emails are being opened/responded</a> to can help to know if you&rsquo;re over-broadcasting.</p>
]]></content>
  </entry>
  
</feed>
