
<!DOCTYPE HTML>
<html>
<head>
	<meta name="google-site-verification" content="hKvGTVuUObK9oCHVB0Hg5jTgwRsTdGVZvpJfDJbwevY" />
	<script data-cfasync="false" type="text/javascript" src="//use.typekit.net/axj3cfp.js"></script>
	<script data-cfasync="false" type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<meta charset="utf-8">
	<title>Apps to Services </title>

<meta name="author" content="Craig Kerstiens"> 

<meta name="description" content="Update the talk for this is now viewable on YouTube here When I first came across Django I was an immediate fan. It featured: Good documentation &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Craig Kerstiens" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.perfectaudience.com/serve/517fd07cf1409000020002dc.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>
	<script type="text/javascript" src="/javascripts/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>

	
    <meta property="twitter:card" content="summary">
    <meta property="twitter:site" content="craigkerstiens">
    <meta property="twitter:url" content="http://www.craigkerstiens.com">
    <meta property="twitter:title" content="Apps to Services">
    <meta property="twitter:description" content="Update the talk for this is now viewable on YouTube here When I first came across Django I was an immediate fan. It featured: Good documentation
Steady but stable progress
Community around apps which &hellip;">


</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Craig Kerstiens</a></h1>
<h4></h4>
<nav id="main-nav"><ul>
	<li><a href="/about/">About</a></li>
	<li><a href="/about/travel_wine.html">Travel & Wine</a></li>
	<li><a href="/recommendations">My Recommendations</a></li>
	<li><a href="/content">Top Content</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/about/">About</a></li>
	<li><a href="/about/travel_wine.html">Travel & Wine</a></li>
	<li><a href="/recommendations">My Recommendations</a></li>
	<li><a href="/content">Top Content</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:www.craigkerstiens.com">
			</form>
		</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<h2 class="title">Apps to Services</h2>
	<div class="sharing">
	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
<!---	<a class="addthis_counter addthis_pill_style"></a> --->
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>

	</div>
	<div class="entry-content"><p><em>Update the talk for this is now viewable on YouTube <a href="http://www.youtube.com/watch?v=ztGpK-v2Oow">here</a></em></p>

<p>When I first came across Django I was an immediate fan. It featured:</p>

<ul>
<li>Good documentation</li>
<li>Steady but stable progress</li>
<li>Community around apps which encouraged <em>DRY</em></li>
</ul>


<p>I&rsquo;ve been a user off and on depending on my needs for nearly four years since discovering it, and throughout that time all of the above have remained true. However, as I&rsquo;ve worked on and encountered more complex applications there&rsquo;s one thing that has time and again broke down for me, which is the Django apps model. It hasn&rsquo;t broken down due to Django only though, I&rsquo;ve seen it break down in Ruby (Rails), Java, .Net, take you&rsquo;re pick of language or framework.</p>

<p>The breakdown of this model is due to several things:</p>

<!-- more -->


<ul>
<li>Successful applications grow which mean more complex applications and more developers</li>
<li>More complex applications often mean larger code bases

<ul>
<li>Deprecating code is good, but not always easy in large code bases</li>
<li>More code means more testing, but slower releases</li>
</ul>
</li>
</ul>


<p>At Heroku one way we often describe the platform to others is <em>&ldquo;A distributed Unix in the cloud.&rdquo;</em> There may be many reasons for this, but one of which is that we love the Unix approach and philosophy of <em>Small sharp tools</em>. Sticking to that, many of our internal pieces are small individual apps that talk across defined contracts or APIs.</p>

<p>Back to Django&rsquo;s app structure&hellip; Many people build apps and re-use them and often share them with the world. This is truly great for re-usability, which means you can focus on building key features. However, this does not enable your application to be more maintainable in the future nor does it enable scalability. Yes, you can absolutely scale a monolithic application, but it doesn&rsquo;t mean you should. This doesn&rsquo;t mean the app structure is entirely broken, it just means that it is a partial step to where you should be. The real solution is to build more of these pieces of your greater application as services.</p>

<p>A Django app is defined as <em>A web application that does something. I.e. Weblog, Poll, Ticket system</em>. Within Django an app contains:</p>

<ul>
<li>Models</li>
<li>Views</li>
<li>URLs</li>
</ul>


<p>I couldn&rsquo;t find a great definition of a Service that was succinct and also said something of value (If you have one please pass along as I&rsquo;d love to have a definition from a source other than myself). For the sake setting something in place I&rsquo;m defining a service as <em>Method of communication over the web with a provider using a defined contract</em>. By this definition a service contains:</p>

<ul>
<li>Provider</li>
<li>Endpoint</li>
<li>Contract</li>
</ul>


<p>Let me clarify this a bit further&hellip;</p>

<p>Tangible example/parable:</p>

<p>Django Apps::</p>

<ul>
<li>Ticket</li>
<li>FAQ</li>
</ul>


<p>Company Teams::</p>

<ul>
<li>Support</li>
<li>Community Evangelist</li>
</ul>


<p>You start with two apps, that maybe share a little code. Moreover they at least exist in a central code base. Then you deploy something and the Ticket app can no longer create FAQ, due to a change in one or the other. There&rsquo;s no finger to point, but more importantly, you don&rsquo;t know how to contact to resolve. Neither team wants to deploy, so you test more. Before every deploy you run tests&hellip; and validate a build&hellip; and deployment slows&hellip; well maybe not with two teams. But as you get to 5 teams it does, and more so with 15, and more so with 30 teams. Then you hire a build master and release master, who really wants that?</p>

<p>So within Django maybe you go from apps all in the same codebase to releasing private versions of apps&hellip;</p>

<p>Your requirements.txt for a main site looks like:</p>

<figure class='code'><figcaption><span>requirements.txt</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">FAQ</span><span class="o">==</span><span class="mf">0.2</span>
</span></code></pre></td></tr></table></div></figure>


<p>You have 3 apps which depend on it, support, marketing, billing. You bump a version <code>FAQ==0.3</code> but then all three or no teams have to upgrade the version to the new APIs. However if your interface was:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'><span class="err">‘</span><span class="n">question</span><span class="err">’</span><span class="p">:</span> <span class="err">“</span><span class="n">my</span> <span class="n">question</span><span class="err">”</span><span class="p">,</span>
</span><span class='line'><span class="err">‘</span><span class="n">source</span><span class="err">’</span><span class="p">:</span> <span class="mi">123</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">requests</span><span class="o">.</span><span class="n">POST</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="err">‘</span><span class="n">FAQ_API</span><span class="err">’</span><span class="p">]</span> <span class="o">+</span> <span class="err">‘</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">create</span><span class="err">’</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>You could also have:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'><span class="err">‘</span><span class="n">question</span><span class="err">’</span><span class="p">:</span> <span class="err">“</span><span class="n">my</span> <span class="n">question</span><span class="err">”</span><span class="p">,</span>
</span><span class='line'><span class="err">‘</span><span class="n">source</span><span class="err">’</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
</span><span class='line'><span class="err">‘</span><span class="n">related</span><span class="err">’</span><span class="p">:</span> <span class="p">[</span><span class="mi">456</span><span class="p">,</span> <span class="mi">789</span><span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">requests</span><span class="o">.</span><span class="n">POST</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="err">‘</span><span class="n">FAQ_API</span><span class="err">’</span><span class="p">]</span> <span class="o">+</span> <span class="err">‘</span><span class="o">/</span><span class="n">v2</span><span class="o">/</span><span class="n">create</span><span class="err">’</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you can easily support both, deprecate v1, and track its usage easily. This doesn&rsquo;t guarantee, but it does enable <em>re-usability</em>, <em>scalability</em>, <em>maintainability</em>. And of course continues to let you build features instead of maintaining software.</p>

<p>In the next post I&rsquo;ll go into a bit more detail of how a real example looks with apps in both forms, using a set of Django Apps and using a set of Services built on Django Apps.</p>

<p><em>Slides from a corresponding talk at DjangoCong are <a href="http://bit.ly/djangocong">here</a></em></p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-04-13T00:00:00-07:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/categories/django/'>Django</a>, <a class='category' href='/categories/engineering/'>Engineering</a>, <a class='category' href='/categories/python/'>Python</a>

</div>


	
</div></article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
<!---	<a class="addthis_counter addthis_pill_style"></a> --->
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    Craig Kerstiens

</footer>
	<script src="/javascripts/slash.js"></script>
<!--<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>  Delete or comment this line to disable Fancybox -->




	<script type="text/javascript">
		var _gaq = _gaq || [];
		var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
		_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
		_gaq.push(['_setAccount', 'UA-4670852-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
