
<!DOCTYPE HTML>
<html>
<head>
	<meta name="google-site-verification" content="hKvGTVuUObK9oCHVB0Hg5jTgwRsTdGVZvpJfDJbwevY" />
	<script data-cfasync="false" type="text/javascript" src="//use.typekit.net/axj3cfp.js"></script>
	<script data-cfasync="false" type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<meta charset="utf-8">
	<title></title>

<meta name="author" content="Craig Kerstiens"> 

<meta name="description" content="Dear Postgres, I&rsquo;ve always felt an affinity for you in my 9 years of working with you. I know others have known you longer, but that doesn& &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Craig Kerstiens" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="/javascripts/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>

	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Craig Kerstiens</a></h1>
<h4></h4>
<nav id="main-nav"><ul>
	<li><a href="/about/">About</a></li>
	<li><a href="/about/travel_wine.html">Travel & Wine</a></li>
	<li><a href="/recommendations">My Recommendations</a></li>
	<li><a href="/content">Top Content</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/about/">About</a></li>
	<li><a href="/about/travel_wine.html">Travel & Wine</a></li>
	<li><a href="/recommendations">My Recommendations</a></li>
	<li><a href="/content">Top Content</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:www.craigkerstiens.com">
			</form>
		</div>
	</div>
</nav>


</header>

	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/2017/10/12/dear-postgres/">
		
			Dear Postgres</a>
	</h2>
	<div class="entry-content">
		<p><img src="https://d3vv6lp55qjaqc.cloudfront.net/items/242D1y2p2g0g281S0O3W/dear_postgres.png?X-CloudApp-Visitor-Id=e4475d145dcf11ebcffabf840edcc11f&v=977a17bd" style="border:0px;"/></p>

<p>Dear Postgres,</p>

<p>I&rsquo;ve always felt an affinity for you in my 9 years of working with you. I know others have known you longer, but that doesn&rsquo;t mean they love you more. Years ago when others complained about your rigidness or that you weren&rsquo;t as accommodating as others I found solace in your steadfast values:</p>

<ol>
<li>Don&rsquo;t lose data</li>
<li>Adhere to standards</li>
<li>Move forward with a balancing act between new fads of the day while still continuously improving</li>
</ol>


<p>You&rsquo;ve been there and seen it all. Years ago you were being disrupted by XML databases. As companies made heavy investment into what such a document database would do for their organization you proceeded to &ldquo;simply&rdquo; add a datatype that accomplished the same and brought your years of progress along with it.</p>

<p>In the early years you had the standard format of index <em>b-tree</em> that most database engines leveraged. Then quietly but confidently you started adding more. Then came K-nearest neighbor, generalized inverted indexes (GIN), and generalized search-tree (GiST), only to be followed by space partitioned GiST and block range indexes (BRIN). Now the only question is which do I use?</p>

<p><img src="https://d3vv6lp55qjaqc.cloudfront.net/items/2I43101m250a363W0s0m/Image%202017-10-12%20at%209.11.57%20AM.gif?X-CloudApp-Visitor-Id=e4475d145dcf11ebcffabf840edcc11f&v=100f9c67" style="width:50%" /></p>

<p>All the while there was this other camp using for something that felt cool but outside my world: GIS. GIS, geographical information systems, I thought was something only civil engineers used. Then GPS came along, then the iPhone and location based devices came along and suddenly I wanted to find out the nearest path to my Peets, or manage geographical region for my grocery delivery service. PostGIS had been there all along building up this powerful feature set, sadly to this day I still mostly marvel from the sideline at this whole other feature set I long to take advantage of&hellip; <em>one day&hellip; one day</em>.</p>

<p>A little over 5 years ago I fell in love with your fastly improving analytical capabilities. No you weren&rsquo;t an MPP system yet, but here came window functions and CTEs, then I almost understood recursive CTEs <em>(still working on that one)</em>. I can iterate over data in a recursive fashion without PL/PgSQL? Yes please! I only want to use it more.</p>

<p>And then five years ago, document stores start taking over the world. I feel like I&rsquo;ve seen this story before, wasn&rsquo;t XML going to change the internet? Enter JSON, the JSON datatype, and JSONB. Wow, this is really nice to mix relational, document storage, join against things. I suddenly don&rsquo;t get why more don&rsquo;t take this flexible approach to building on a good foundation and layering on the refinements.</p>

<p>Extensions! Where have you been all my life? There’s <a href="https://www.citusdata.com">Citus</a>, and <a href="https://github.com/aggregateknowledge/postgresql-hll">HyperLogLog</a>, and <a href="https://www.zombodb.com/">ZomboDB</a>, with each I can add functionality to Postgres without it being limited to the standard release, they can be in C or not. Wait, all along so much has been built on this foundation? PostGIS, full-text search, hstore? I like all those things, why didn&rsquo;t you tell me all along about this foundation? Postgres, I like what I&rsquo;m seeing how you&rsquo;re allowing others to do more without having it be in the core of Postgres. This extension stuff is really kinda cool that it&rsquo;s Postgres and then some, kinda like C and then ++, wait nevermind scratch that analogy.</p>

<p>Sorry, I&rsquo;ve rambled a bit. You&rsquo;re a little over twenty years old now. I&rsquo;ve known you for nearly ten of those years so I know there&rsquo;s so much about your background I don&rsquo;t know, I hope we get to spend the time together to share it all. This 10 release is really an exciting one to me. We&rsquo;ve spent all this time together and I feel like each passing year the bond grows fonder.</p>

<p>Now you&rsquo;ve brought me better parallelism so I can further utilize my system resources. I now have partitioning. Thank you! I don&rsquo;t have to roll my own hacks to help age out old data for my time series database. Logical replication will make so many other things possible, such as more online upgrades and integration with other systems.</p>

<p>Postgres, I just want to say thank you for the past ten years together. Thank you for all you’ve done and for all you’ll continue to do in the future.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2017-10-12T08:00:00-07:00" pubdate data-updated="true">Oct 12<span>th</span>, 2017</time></div>
	

<div class="tags">

	<a class='category' href='/categories/postgresql/'>PostgreSQL</a>, <a class='category' href='/categories/postgres/'>Postgres,</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2017/09/18/postgres-connection-management/">
		
			Tracking and Managing Your Postgres Connections</a>
	</h2>
	<div class="entry-content">
		<p>Managing connections in Postgres is a topic that seems to come up several times a week in conversations. I&rsquo;ve written some about scaling your connections and the right approach when you truly need a high level of connections, which is to use a connection pooler like pgBouncer. But what do you do before that point and how can you better track what is going on with your connections in Postgres? 
		
		<a href="/2017/09/18/postgres-connection-management/" class="more-link">Read on </a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2017-09-18T16:00:00-07:00" pubdate data-updated="true">Sep 18<span>th</span>, 2017</time></div>
	

<div class="tags">

	<a class='category' href='/categories/postgresql/'>PostgreSQL</a>, <a class='category' href='/categories/postgres/'>Postgres,</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2017/09/10/better-postgres-migrations/">
		
			Better Database Migrations in Postgres</a>
	</h2>
	<div class="entry-content">
		<p>As your database grows and scales there are some operations that you need to take more care of than you did when you were just starting. When working with your application in your dev environment you may not be fully aware of the cost of some operations until you run them against production. And at some point most of us have been guilty of it, running some migration that starts at 5 minutes, then 15 minutes in it&rsquo;s still running, and suddenly production traffic is impacted.</p>

<p>There are two operations that tend to happen quite frequently, each with some straightforward approaches to mitigate having any noticable amount of downtime. Let&rsquo;s look at each of the operations, how they work and then how you can approach them in a safer way. 
		
		<a href="/2017/09/10/better-postgres-migrations/" class="more-link">Read on </a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2017-09-10T00:00:00-07:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/categories/postgresql/'>PostgreSQL</a>, <a class='category' href='/categories/postgres/'>Postgres,</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2017/09/03/postgres-backups-physical-vs-logical/">
		
			Postgres Backups: Logical vs. Physical an Overview</a>
	</h2>
	<div class="entry-content">
		<p>It&rsquo;s not a very disputed topic that you should backup your database, and further test your backups. What is a little less discussed, at least for Postgres, is the types of backups that exist. Within Postgres there are two forms of backups and understanding them is a useful foundation for anyone working with Postgres. The two backup types are</p>

<ol>
<li>Physical: which consist of the actual bytes on disk,</li>
<li>Logical: which is a more portable format.</li>
</ol>


<p>Let&rsquo;s dig into each a bit more so you can better assess which makes sense for you. 
		
		<a href="/2017/09/03/postgres-backups-physical-vs-logical/" class="more-link">Read on </a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2017-09-03T00:00:00-07:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/categories/postgresql/'>PostgreSQL</a>, <a class='category' href='/categories/postgres/'>Postgres,</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2017/07/01/postgresopen-sv-line-up/">
		
			Postgres Open Silicon Valley Line-up: First Take</a>
	</h2>
	<div class="entry-content">
		<p>This year Postgres open and PGConf SV have combined to great a bigger and better conference right in downtown San Francisco. <em>I&rsquo;m obviously biased as I&rsquo;m one of the co-chairs, and I know every conference organizer says picking the talks was hard, but I&rsquo;m especially excited for the line-up this year</em>. The hard part for me is going to be which talks do I miss out on because I&rsquo;m sitting in the other session that&rsquo;s ongoing. You can see the full list of <a href="https://postgresql.us/events/sessions/pgopen2017/">talk and tutorial sessions</a>, but I thought it&rsquo;d be fun to do a rundown of some of my favorites. 
		
		<a href="/2017/07/01/postgresopen-sv-line-up/" class="more-link">Read on </a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2017-07-01T00:00:00-07:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/categories/postgresql/'>PostgreSQL</a>, <a class='category' href='/categories/postgres/'>Postgres,</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2017/06/08/working-with-time-in-postgres/">
		
			Working With Time in Postgres</a>
	</h2>
	<div class="entry-content">
		<p>A massive amount of reporting queries, whether really intensive data analysis, or just basic insights into your business involving looking at data over a certain time period. Postgres has really rich support for dealing with time out of the box, something that&rsquo;s often very underweighted when dealing with a database. Sure, if you have a time-series database it&rsquo;s implied, but even then how flexible and friendly is it from a query perspective? With Postgres there&rsquo;s a lot of key items available to you, let&rsquo;s dig in at the things that make your life easier when querying. 
		
		<a href="/2017/06/08/working-with-time-in-postgres/" class="more-link">Read on </a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2017-06-08T00:00:00-07:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/categories/postgresql/'>PostgreSQL</a>, <a class='category' href='/categories/postgres/'>Postgres,</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2017/04/30/why-postgres-five-years-later/">
		
			Why Use Postgres (Updated for Last 5 Years)</a>
	</h2>
	<div class="entry-content">
		<p>Five years ago <a href="http://www.craigkerstiens.com/2012/04/30/why-postgres/">I wrote a post</a> that got some good attention on why you should use Postgres. Almost a year later I <a href="http://www.craigkerstiens.com/2012/05/07/why-postgres-part-2/">added a bunch of things</a> I missed. Many of those items bear repeating, and I&rsquo;ll recap a few of those in the latter half of this post. But in the last 4-5 years there&rsquo;s been a lot of improvements and more reasons added to the list of why you should use Postgres. Here&rsquo;s the rundown of the things that make Postgres a great database you should consider using. 
		
		<a href="/2017/04/30/why-postgres-five-years-later/" class="more-link">Read on </a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2017-04-30T00:00:00-07:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/categories/postgresql/'>PostgreSQL</a>, <a class='category' href='/categories/postgres/'>Postgres,</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2017/03/12/getting-started-with-jsonb-in-postgres/">
		
			Getting Started With JSONB in Postgres</a>
	</h2>
	<div class="entry-content">
		<p>JSONB is an awesome datatype in Postgres. I find myself using it on a weekly basis these days. Often in using some API (such as <a href="https://www.clearbit.com">clearbit</a>) I&rsquo;ll get a JSON response back, instead of parsing that out into a table structure it&rsquo;s really easy to throw it into a JSONB then query for various parts of it.</p>

<p><em>If you&rsquo;re not familiar with JSONB, it&rsquo;s a binary representation of JSON in your database. You can read a bit more about it vs. JSON <a href="https://www.citusdata.com/blog/2016/07/14/choosing-nosql-hstore-json-jsonb/">here</a>.</em></p>

<p>In working with JSONB here&rsquo;s a few quick tips to get up and running with it even faster: 
		
		<a href="/2017/03/12/getting-started-with-jsonb-in-postgres/" class="more-link">Read on </a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2017-03-12T00:00:00-08:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/categories/postgresql/'>PostgreSQL</a>, <a class='category' href='/categories/postgres/'>Postgres,</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2017/01/08/simple-but-handy-postgresql-features/">
		
			Simple but Handy Postgres Features</a>
	</h2>
	<div class="entry-content">
		<p>It seems each week when I&rsquo;m reviewing data with someone a feature comes up that they had no idea existed within Postgres. In an effort to continue documenting many of the features and functionality that are useful, here&rsquo;s a list of just a few that you may find handy the next time your working with your data.</p>

<h3>Psql, and \e</h3>

<p>This one I&rsquo;ve <a href="http://www.craigkerstiens.com/2013/02/13/How-I-Work-With-Postgres/">covered before</a>, but it&rsquo;s worth restating. Psql is a great editor that already comes with Postgres. If you&rsquo;re comfortable on the CLI you should consider giving it a try. You can even setup you&rsquo;re own <code>.psqlrc</code> for it so that it&rsquo;s well customized to your liking. In particular turning <code>\timing</code> on is especially useful. But even with all sorts of customization if you&rsquo;re not aware that you can use your preferred editor by using <code>\e</code> then you&rsquo;re missing out. This will allow you to open up the last run query, edit it, save–and then it&rsquo;ll run for you. Vim, Emacs, even Sublime text works just take your pick by setting your <code>$EDITOR</code> variable.</p>


		
		<a href="/2017/01/08/simple-but-handy-postgresql-features/" class="more-link">Read on </a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2017-01-08T00:00:00-08:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/categories/postgresql/'>PostgreSQL</a>, <a class='category' href='/categories/postgres/'>Postgres,</a>

</div>


	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/2016/11/23/syncing-from-postgres-to-salesforce-part-1/">
		
			Syncing From Postgres to Salesforce - Data Mappings</a>
	</h2>
	<div class="entry-content">
		<p>For the second time now I&rsquo;ve had to implement a system that syncs from my system of record into Salesforce.com, the first at Heroku and now at <a href="https://www.citusdata.com">Citus Data</a>. The case here is pretty simple, I have a software-as-a-service, B2B product. It&rsquo;s a homegrown application in these cases in Ruby, but could be Python, .Net, any language of your choosing. The problem is I don&rsquo;t want to have to be rebuilding my own CRM, reporting, etc. on top of all of my internal database. And as soon as you&rsquo;re at some reasonable size (sales guy of 1 or more) you need to be able to provide insights on what&rsquo;s in that system of record database to others.</p>

<p>While my tooling isn&rsquo;t a full fledged product by any means, here&rsquo;s a bit of how I&rsquo;ve developed this process a few times over and some of the annoying bits of code to help get you started. In this post I&rsquo;ll walk through some of the basic datatypes, then we&rsquo;ll follow-up with the overall architecture and tweaks you need to make to Salesforce, and finally we&rsquo;ll provide some example code to help you create this setup yourself.
		
		<a href="/2016/11/23/syncing-from-postgres-to-salesforce-part-1/" class="more-link">Read on </a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-11-23T00:00:00-08:00" pubdate data-updated="true"></time></div>
	


	
</div></article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2017

    Craig Kerstiens

</footer>
	<script src="/javascripts/slash.js"></script>
<!--  Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'craigkerstiens';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
		_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
		_gaq.push(['_setAccount', 'UA-4670852-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
